<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureBank Pro | Online Banking Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-light: #e8f5e9;
            --primary: #c8e6c9;
            --primary-dark: #a5d6a7;
            --primary-darker: #81c784;
            --primary-darkest: #66bb6a;
            --accent: #2e7d32;
            --accent-dark: #1b5e20;
            --text-light: #f5f5f5;
            --text-dark: #212121;
            --bg-light: #ffffff;
            --bg-dark: #121212;
            --card-light: #f5f5f5;
            --card-dark: #1e1e1e;
            --danger: #d32f2f;
            --warning: #ffa000;
            --success: #388e3c;
            --info: #1976d2;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--primary-light);
            color: var(--text-dark);
            transition: var(--transition);
            min-height: 100vh;
            overflow-x: hidden;
        }

        body.dark-mode {
            background-color: var(--bg-dark);
            color: var(--text-light);
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: var(--primary);
            padding: 20px;
            transition: var(--transition);
            box-shadow: var(--shadow);
            z-index: 100;
        }

        .dark-mode .sidebar {
            background-color: var(--card-dark);
        }

        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            color: var(--accent-dark);
            font-weight: bold;
            font-size: 1.5rem;
        }

        .dark-mode .logo {
            color: var(--primary-darkest);
        }

        .logo i {
            margin-right: 10px;
            font-size: 2rem;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 15px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border-radius: 5px;
            color: var(--text-dark);
            text-decoration: none;
            transition: var(--transition);
        }

        .dark-mode .nav-link {
            color: var(--text-light);
        }

        .nav-link i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .nav-link:hover, .nav-link.active {
            background-color: var(--primary-darkest);
            color: white;
        }

        .dark-mode .nav-link:hover, .dark-mode .nav-link.active {
            background-color: var(--primary-darkest);
        }

        .mode-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 15px;
            background-color: var(--primary-dark);
            border-radius: 5px;
            margin-top: 30px;
            cursor: pointer;
            transition: var(--transition);
        }

        .dark-mode .mode-toggle {
            background-color: var(--card-dark);
            border: 1px solid var(--primary-darkest);
        }

        .mode-toggle i {
            font-size: 1.2rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 20px;
            transition: var(--transition);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--primary-dark);
        }

        .dark-mode .header {
            border-bottom: 1px solid var(--card-dark);
        }

        .header h1 {
            color: var(--accent-dark);
        }

        .dark-mode .header h1 {
            color: var(--primary-darkest);
        }

        .user-info {
            display: flex;
            align-items: center;
        }

        .user-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }

        .notification-bell {
            position: relative;
            margin-right: 20px;
            cursor: pointer;
        }

        .notification-bell i {
            font-size: 1.5rem;
            color: var(--accent-dark);
        }

        .dark-mode .notification-bell i {
            color: var(--primary-darkest);
        }

        .notification-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        /* Dashboard */
        .dashboard-section, .accounts-section, .transactions-section, 
        .transfer-section, .profile-section, .risk-section, .chatbot-section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background-color: var(--bg-light);
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .dark-mode .card {
            background-color: var(--card-dark);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-dark);
        }

        .dark-mode .card-title {
            color: var(--primary-darkest);
        }

        .card-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
            color: var(--text-dark);
        }

        .dark-mode .card-value {
            color: var(--text-light);
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            font-size: 0.9rem;
            color: var(--accent-dark);
        }

        .dark-mode .card-footer {
            color: var(--primary-darkest);
        }

        .positive {
            color: var(--success);
        }

        .negative {
            color: var(--danger);
        }

        .chart-container {
            height: 300px;
            margin-top: 20px;
        }

        /* Transactions */
        .transaction-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .transaction-table th, .transaction-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--primary-dark);
        }

        .dark-mode .transaction-table th, 
        .dark-mode .transaction-table td {
            border-bottom: 1px solid var(--card-dark);
        }

        .transaction-table th {
            background-color: var(--primary-dark);
            color: white;
            font-weight: 600;
        }

        .dark-mode .transaction-table th {
            background-color: var(--primary-darkest);
        }

        .transaction-table tr:hover {
            background-color: var(--primary-light);
        }

        .dark-mode .transaction-table tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-pending {
            background-color: var(--warning);
            color: white;
        }

        .status-completed {
            background-color: var(--success);
            color: white;
        }

        .status-failed {
            background-color: var(--danger);
            color: white;
        }

        /* Transfer Form */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--accent-dark);
        }

        .dark-mode .form-group label {
            color: var(--primary-darkest);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--primary-dark);
            border-radius: 5px;
            font-size: 1rem;
            transition: var(--transition);
            background-color: var(--bg-light);
            color: var(--text-dark);
        }

        .dark-mode .form-control {
            background-color: var(--card-dark);
            border-color: var(--card-dark);
            color: var(--text-light);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-primary {
            background-color: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--accent-dark);
        }

        .btn-secondary {
            background-color: var(--primary-dark);
            color: var(--text-dark);
        }

        .dark-mode .btn-secondary {
            color: var(--text-light);
        }

        .btn-secondary:hover {
            background-color: var(--primary-darker);
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #b71c1c;
        }

        /* Risk Monitor */
        .risk-level {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .risk-meter {
            flex: 1;
            height: 20px;
            background-color: var(--primary-light);
            border-radius: 10px;
            overflow: hidden;
            margin-right: 15px;
        }

        .dark-mode .risk-meter {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .risk-progress {
            height: 100%;
            background: linear-gradient(to right, var(--success), var(--warning), var(--danger));
            width: 30%;
            transition: width 0.5s ease;
        }

        .risk-value {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .risk-low {
            color: var(--success);
        }

        .risk-medium {
            color: var(--warning);
        }

        .risk-high {
            color: var(--danger);
        }

        .activity-log {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid var(--primary-dark);
            border-radius: 5px;
            padding: 10px;
        }

        .dark-mode .activity-log {
            border-color: var(--card-dark);
        }

        .log-entry {
            padding: 10px 0;
            border-bottom: 1px solid var(--primary);
            font-size: 0.9rem;
        }

        .dark-mode .log-entry {
            border-bottom: 1px solid var(--card-dark);
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-time {
            color: var(--accent-dark);
            font-weight: 600;
            margin-right: 10px;
        }

        .dark-mode .log-time {
            color: var(--primary-darkest);
        }

        /* Chatbot */
        .chatbot-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            border: 1px solid var(--primary-dark);
            border-radius: 10px;
            overflow: hidden;
        }

        .dark-mode .chatbot-container {
            border-color: var(--card-dark);
        }

        .chatbot-header {
            background-color: var(--primary-darkest);
            color: white;
            padding: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
        }

        .chatbot-header i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .chatbot-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: var(--bg-light);
        }

        .dark-mode .chatbot-messages {
            background-color: var(--card-dark);
        }

        .message {
            margin-bottom: 15px;
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            line-height: 1.4;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        .bot-message {
            background-color: var(--primary);
            border-bottom-left-radius: 5px;
            align-self: flex-start;
            color: var(--text-dark);
        }

        .dark-mode .bot-message {
            background-color: var(--primary-darkest);
            color: white;
        }

        .user-message {
            background-color: var(--accent);
            color: white;
            border-bottom-right-radius: 5px;
            margin-left: auto;
        }

        .chatbot-input {
            display: flex;
            padding: 15px;
            background-color: var(--primary-light);
            border-top: 1px solid var(--primary-dark);
        }

        .dark-mode .chatbot-input {
            background-color: var(--card-dark);
            border-top: 1px solid var(--card-dark);
        }

        .chatbot-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--primary-dark);
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            background-color: var(--bg-light);
            color: var(--text-dark);
        }

        .dark-mode .chatbot-input input {
            background-color: var(--card-dark);
            border-color: var(--card-dark);
            color: var(--text-light);
        }

        .chatbot-input button {
            margin-left: 10px;
            padding: 12px;
            border: none;
            border-radius: 50%;
            background-color: var(--accent);
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .chatbot-input button:hover {
            background-color: var(--accent-dark);
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--bg-light);
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
            position: relative;
        }

        .dark-mode .modal-content {
            background-color: var(--card-dark);
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dark-mode .modal-header {
            border-bottom: 1px solid var(--card-dark);
        }

        .modal-header h3 {
            color: var(--accent-dark);
            font-size: 1.5rem;
        }

        .dark-mode .modal-header h3 {
            color: var(--primary-darkest);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-dark);
        }

        .dark-mode .modal-close {
            color: var(--text-light);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--primary);
            display: flex;
            justify-content: flex-end;
        }

        .dark-mode .modal-footer {
            border-top: 1px solid var(--card-dark);
        }

        .terms-content {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        /* Danger Zone */
        .danger-zone {
            border: 2px solid var(--danger);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            background-color: rgba(211, 47, 47, 0.05);
        }

        .dark-mode .danger-zone {
            background-color: rgba(211, 47, 47, 0.1);
        }

        .danger-zone h3 {
            color: var(--danger);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .danger-zone h3 i {
            margin-right: 10px;
        }

        .danger-zone p {
            margin-bottom: 20px;
            color: var(--text-dark);
        }

        .dark-mode .danger-zone p {
            color: var(--text-light);
        }

        /* Responsive */
        @media (max-width: 992px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                padding: 15px;
            }
            
            .nav-menu {
                display: flex;
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .nav-item {
                margin-bottom: 0;
                margin-right: 10px;
                white-space: nowrap;
            }
            
            .mode-toggle {
                margin-top: 15px;
                margin-bottom: 10px;
            }
        }

        @media (max-width: 768px) {
            .cards {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .user-info {
                margin-top: 15px;
            }
        }

        /* Animations */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(217, 30, 24, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(217, 30, 24, 0); }
            100% { box-shadow: 0 0 0 0 rgba(217, 30, 24, 0); }
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <i class="fas fa-university"></i>
                <span>SecureBank Pro</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-section="dashboard">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="accounts">
                        <i class="fas fa-wallet"></i>
                        <span>Accounts</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="transactions">
                        <i class="fas fa-exchange-alt"></i>
                        <span>Transactions</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="transfer">
                        <i class="fas fa-paper-plane"></i>
                        <span>Transfer Money</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="profile">
                        <i class="fas fa-user"></i>
                        <span>Profile</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="risk">
                        <i class="fas fa-shield-alt"></i>
                        <span>Risk Monitor</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="chatbot">
                        <i class="fas fa-robot"></i>
                        <span>AI Assistant</span>
                    </a>
                </li>
            </ul>
            <div class="mode-toggle" id="modeToggle">
                <span><i class="fas fa-moon"></i> Dark Mode</span>
                <i class="fas fa-toggle-off"></i>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1 id="sectionTitle">Dashboard</h1>
                <div class="user-info">
                    <div class="notification-bell" id="notificationBell">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count" id="notificationCount">3</span>
                    </div>
                    <img src="https://ui-avatars.com/api/?name=John+Doe&background=2e7d32&color=fff" alt="User Avatar">
                    <span>John Doe</span>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div class="dashboard-section section active">
                <div class="cards">
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Total Balance</span>
                            <i class="fas fa-eye-slash" id="balanceToggle"></i>
                        </div>
                        <div class="card-value" id="totalBalance">$12,456.78</div>
                        <div class="card-footer">
                            <span>All Accounts</span>
                            <span class="positive">+2.4% <i class="fas fa-arrow-up"></i></span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Monthly Spending</span>
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="card-value">$2,345.67</div>
                        <div class="card-footer">
                            <span>Current Month</span>
                            <span class="negative">-5.2% <i class="fas fa-arrow-down"></i></span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Savings Goal</span>
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="card-value">$8,500/10,000</div>
                        <div class="card-footer">
                            <span>85% Completed</span>
                            <span class="positive">On Track</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Spending Analytics</span>
                        <div>
                            <button class="btn btn-secondary" id="weekBtn">Week</button>
                            <button class="btn btn-secondary" id="monthBtn">Month</button>
                            <button class="btn btn-secondary" id="yearBtn">Year</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="spendingChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Recent Transactions</span>
                        <a href="#" class="nav-link" data-section="transactions" style="padding: 0; background: none;">
                            <span>View All</span>
                        </a>
                    </div>
                    <table class="transaction-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Amount</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Jun 12, 2023</td>
                                <td>Amazon Purchase</td>
                                <td class="negative">-$89.99</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>Jun 10, 2023</td>
                                <td>Salary Deposit</td>
                                <td class="positive">+$3,450.00</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>Jun 8, 2023</td>
                                <td>Electric Bill</td>
                                <td class="negative">-$120.75</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>Jun 5, 2023</td>
                                <td>Transfer to Alice</td>
                                <td class="negative">-$250.00</td>
                                <td><span class="status status-pending">Pending</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Accounts Section -->
            <div class="accounts-section section">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">My Accounts</span>
                        <button class="btn btn-primary" id="openNewAccountBtn">Open New Account</button>
                    </div>
                    <table class="transaction-table">
                        <thead>
                            <tr>
                                <th>Account</th>
                                <th>Number</th>
                                <th>Balance</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Checking Account</strong><br>
                                    <small>Primary</small>
                                </td>
                                <td>****3456</td>
                                <td>$5,678.90</td>
                                <td><span class="status status-completed">Active</span></td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">Details</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Savings Account</strong><br>
                                    <small>High Yield</small>
                                </td>
                                <td>****7821</td>
                                <td>$6,777.88</td>
                                <td><span class="status status-completed">Active</span></td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">Details</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Credit Card</strong><br>
                                    <small>Platinum</small>
                                </td>
                                <td>****9012</td>
                                <td>-$1,234.56</td>
                                <td><span class="status status-completed">Active</span></td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">Details</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Account Performance</span>
                    </div>
                    <div class="chart-container">
                        <canvas id="accountsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Transactions Section -->
            <div class="transactions-section section">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Transaction History</span>
                        <div>
                            <select class="form-control" style="width: auto; display: inline-block; margin-right: 10px;" id="transactionFilter">
                                <option>All Transactions</option>
                                <option>Income</option>
                                <option>Expenses</option>
                                <option>Transfers</option>
                            </select>
                            <input type="month" class="form-control" style="width: auto; display: inline-block;" id="transactionMonth">
                        </div>
                    </div>
                    <table class="transaction-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Category</th>
                                <th>Amount</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="transactionTableBody">
                            <tr>
                                <td>Jun 15, 2023</td>
                                <td>Grocery Store</td>
                                <td>Food</td>
                                <td class="negative">-$87.45</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>Jun 14, 2023</td>
                                <td>Online Subscription</td>
                                <td>Entertainment</td>
                                <td class="negative">-$14.99</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>Jun 12, 2023</td>
                                <td>Amazon Purchase</td>
                                <td>Shopping</td>
                                <td class="negative">-$89.99</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>Jun 10, 2023</td>
                                <td>Salary Deposit</td>
                                <td>Income</td>
                                <td class="positive">+$3,450.00</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>Jun 8, 2023</td>
                                <td>Electric Bill</td>
                                <td>Utilities</td>
                                <td class="negative">-$120.75</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>Jun 5, 2023</td>
                                <td>Transfer to Alice</td>
                                <td>Transfer</td>
                                <td class="negative">-$250.00</td>
                                <td><span class="status status-pending">Pending</span></td>
                            </tr>
                            <tr>
                                <td>Jun 3, 2023</td>
                                <td>Restaurant</td>
                                <td>Dining</td>
                                <td class="negative">-$45.30</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>Jun 1, 2023</td>
                                <td>Gas Station</td>
                                <td>Transportation</td>
                                <td class="negative">-$35.20</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="padding: 15px; text-align: center;">
                        <button class="btn btn-secondary">Load More</button>
                    </div>
                </div>
            </div>

            <!-- Transfer Section -->
            <div class="transfer-section section">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Transfer Money</span>
                    </div>
                    <div style="padding: 20px;">
                        <form id="transferForm">
                            <div class="form-group">
                                <label for="fromAccount">From Account</label>
                                <select class="form-control" id="fromAccount">
                                    <option>Checking Account (****3456) - $5,678.90</option>
                                    <option>Savings Account (****7821) - $6,777.88</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="toAccount">To Account</label>
                                <select class="form-control" id="toAccount">
                                    <option>Internal Transfer</option>
                                    <option>External Bank Transfer</option>
                                    <option>Pay a Friend</option>
                                </select>
                            </div>
                            <div class="form-group" id="recipientGroup" style="display: none;">
                                <label for="recipient">Recipient Details</label>
                                <input type="text" class="form-control" id="recipient" placeholder="Name or Email">
                            </div>
                            <div class="form-group" id="accountNumberGroup" style="display: none;">
                                <label for="accountNumber">Account Number</label>
                                <input type="text" class="form-control" id="accountNumber" placeholder="123456789">
                            </div>
                            <div class="form-group" id="routingNumberGroup" style="display: none;">
                                <label for="routingNumber">Routing Number</label>
                                <input type="text" class="form-control" id="routingNumber" placeholder="021000021">
                            </div>
                            <div class="form-group">
                                <label for="amount">Amount</label>
                                <div style="position: relative;">
                                    <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%);">$</span>
                                    <input type="number" class="form-control" id="amount" placeholder="0.00" style="padding-left: 30px;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="description">Description (Optional)</label>
                                <input type="text" class="form-control" id="description" placeholder="e.g., Rent payment">
                            </div>
                            <div class="form-group">
                                <label for="transferDate">Transfer Date</label>
                                <select class="form-control" id="transferDate">
                                    <option>Today</option>
                                    <option>Tomorrow</option>
                                    <option>Next Business Day</option>
                                    <option>Select Date</option>
                                </select>
                            </div>
                            <div style="margin-top: 30px;">
                                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px;">Transfer Money</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Recent Transfers</span>
                    </div>
                    <table class="transaction-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>From</th>
                                <th>To</th>
                                <th>Amount</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Jun 5, 2023</td>
                                <td>Checking</td>
                                <td>Alice Johnson</td>
                                <td class="negative">-$250.00</td>
                                <td><span class="status status-pending">Pending</span></td>
                            </tr>
                            <tr>
                                <td>May 28, 2023</td>
                                <td>Savings</td>
                                <td>Checking</td>
                                <td class="positive">+$500.00</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>May 15, 2023</td>
                                <td>Checking</td>
                                <td>Electric Company</td>
                                <td class="negative">-$120.75</td>
                                <td><span class="status status-completed">Completed</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Profile Section -->
            <div class="profile-section section">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Personal Information</span>
                        <button class="btn btn-secondary" id="editProfileBtn">Edit</button>
                    </div>
                    <div style="padding: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 30px;">
                            <img src="https://ui-avatars.com/api/?name=John+Doe&background=2e7d32&color=fff&size=100" alt="User Avatar" style="border-radius: 50%; margin-right: 20px;">
                            <div>
                                <h3>John Doe</h3>
                                <p>Member since June 2018</p>
                                <button class="btn btn-secondary" style="margin-top: 10px; padding: 5px 15px;">Change Photo</button>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="form-group">
                                <label>First Name</label>
                                <input type="text" class="form-control" value="John" readonly id="firstName">
                            </div>
                            <div class="form-group">
                                <label>Last Name</label>
                                <input type="text" class="form-control" value="Doe" readonly id="lastName">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" class="form-control" value="john.doe@example.com" readonly id="email">
                            </div>
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" class="form-control" value="(123) 456-7890" readonly id="phone">
                            </div>
                            <div class="form-group">
                                <label>Date of Birth</label>
                                <input type="text" class="form-control" value="January 15, 1985" readonly id="dob">
                            </div>
                            <div class="form-group">
                                <label>Address</label>
                                <input type="text" class="form-control" value="123 Main St, Anytown, USA" readonly id="address">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Security Settings</span>
                    </div>
                    <div style="padding: 20px;">
                        <div class="form-group">
                            <label>Password</label>
                            <div style="display: flex;">
                                <input type="password" class="form-control" value="password123" readonly style="flex: 1;">
                                <button class="btn btn-secondary" style="margin-left: 10px;">Change</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Two-Factor Authentication</label>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span>Enabled (SMS)</span>
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Security Questions</label>
                            <div style="margin-top: 10px;">
                                <div style="margin-bottom: 15px;">
                                    <p style="font-weight: 600;">What was your first pet's name?</p>
                                    <input type="text" class="form-control" value="Max" readonly>
                                </div>
                                <div>
                                    <p style="font-weight: 600;">What city were you born in?</p>
                                    <input type="text" class="form-control" value="Chicago" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="danger-zone">
                    <h3><i class="fas fa-exclamation-triangle"></i> Danger Zone</h3>
                    <p>These actions are irreversible. Please proceed with caution.</p>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-danger" id="deactivateBtn">Deactivate Account</button>
                        <button class="btn btn-danger" id="deleteBtn">Delete Account</button>
                    </div>
                </div>
            </div>

            <!-- Risk Monitor Section -->
            <div class="risk-section section">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Risk Monitoring</span>
                        <span id="riskStatus" class="status status-completed">Normal Activity</span>
                    </div>
                    <div style="padding: 20px;">
                        <div class="risk-level">
                            <div class="risk-meter">
                                <div class="risk-progress" id="riskProgress"></div>
                            </div>
                            <div class="risk-value" id="riskValue">30%</div>
                        </div>
                        <p style="margin-bottom: 20px;" id="riskDescription">Your account shows normal activity patterns. No suspicious behavior detected.</p>
                        
                        <h3 style="margin-bottom: 15px;">Activity Log</h3>
                        <div class="activity-log" id="activityLog">
                            <div class="log-entry">
                                <span class="log-time">[10:42:15]</span>
                                <span>User logged in from Chrome on Windows (IP: 192.168.1.1)</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-time">[10:43:22]</span>
                                <span>Viewed account balance</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-time">[10:45:10]</span>
                                <span>Checked transaction history</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-time">[10:47:35]</span>
                                <span>Opened transfer page</span>
                            </div>
                        </div>
                        
                        <div style="margin-top: 30px;">
                            <button class="btn btn-primary" id="refreshRiskBtn">Refresh Analysis</button>
                            <button class="btn btn-secondary" id="viewFullLogBtn">View Full Log</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Risk Over Time</span>
                    </div>
                    <div class="chart-container">
                        <canvas id="riskChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Chatbot Section -->
            <div class="chatbot-section section">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">AI Banking Assistant</span>
                        <span>Powered by SecureBank AI</span>
                    </div>
                    <div class="chatbot-container">
                        <div class="chatbot-header">
                            <i class="fas fa-robot"></i>
                            <span>SecureBank Assistant</span>
                        </div>
                        <div class="chatbot-messages" id="chatbotMessages">
                            <div class="message bot-message">
                                Hello! I'm your SecureBank AI assistant. How can I help you today?
                            </div>
                        </div>
                        <div class="chatbot-input">
                            <input type="text" placeholder="Type your message here..." id="chatbotInput">
                            <button id="sendMessageBtn"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Session Summary</span>
                    </div>
                    <div style="padding: 20px;" id="chatbotSummary">
                        <p>Start chatting with the AI assistant to generate a session summary.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div class="modal" id="notificationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Notifications</h3>
                <button class="modal-close" id="closeNotificationModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--primary);">
                    <p style="font-weight: 600;">New security alert</p>
                    <p style="font-size: 0.9rem; color: var(--text-dark);">A new login was detected from Chrome on Windows at 10:42 AM</p>
                    <p style="font-size: 0.8rem; color: var(--accent-dark); margin-top: 5px;">Just now</p>
                </div>
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--primary);">
                    <p style="font-weight: 600;">Payment received</p>
                    <p style="font-size: 0.9rem; color: var(--text-dark);">$3,450.00 was deposited to your checking account</p>
                    <p style="font-size: 0.8rem; color: var(--accent-dark); margin-top: 5px;">2 days ago</p>
                </div>
                <div style="margin-bottom: 15px;">
                    <p style="font-weight: 600;">Account statement ready</p>
                    <p style="font-size: 0.9rem; color: var(--text-dark);">Your May 2023 statement is now available</p>
                    <p style="font-size: 0.8rem; color: var(--accent-dark); margin-top: 5px;">1 week ago</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary">Mark All as Read</button>
            </div>
        </div>
    </div>

    <!-- Terms Modal -->
    <div class="modal" id="termsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Terms and Conditions</h3>
                <button class="modal-close" id="closeTermsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="terms-content">
                    <h4>1. Account Agreement</h4>
                    <p>This Online Banking Agreement (the "Agreement") sets forth the terms and conditions governing your use of SecureBank Pro's online banking services. By using these services, you agree to be bound by the terms of this Agreement.</p>
                    
                    <h4>2. Services</h4>
                    <p>The online banking services ("Services") allow you to access your account information, transfer funds, pay bills, and perform other transactions over the Internet. We may add, modify, or discontinue any Service at any time.</p>
                    
                    <h4>3. Your Responsibilities</h4>
                    <p>You are responsible for maintaining the confidentiality of your login credentials and for all activities that occur under your account. You must immediately notify us of any unauthorized use of your account.</p>
                    
                    <h4>4. Privacy</h4>
                    <p>We are committed to protecting your privacy. All information gathered from you in connection with your use of the Services will be governed by our Privacy Policy.</p>
                    
                    <h4>5. Liability</h4>
                    <p>We shall not be liable for any failure or delay in performance due to circumstances beyond our reasonable control. Our liability for any claim arising from this Agreement shall not exceed the fees you paid us for the Services.</p>
                    
                    <h4>6. Changes to Agreement</h4>
                    <p>We may modify this Agreement at any time. We will notify you of any material changes as required by law. Your continued use of the Services constitutes acceptance of the modified Agreement.</p>
                    
                    <h4>7. Governing Law</h4>
                    <p>This Agreement shall be governed by and construed in accordance with the laws of the state where your account is held, without regard to its conflict of law provisions.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="acceptTermsBtn">I Accept</button>
            </div>
        </div>
    </div>

    <!-- Deactivate Account Modal -->
    <div class="modal" id="deactivateModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Deactivate Account</h3>
                <button class="modal-close" id="closeDeactivateModal">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 15px;">Are you sure you want to deactivate your account? This will disable all online banking services but preserve your account data.</p>
                <div class="form-group">
                    <label for="deactivateReason">Reason for deactivation (optional)</label>
                    <select class="form-control" id="deactivateReason">
                        <option>Select a reason</option>
                        <option>Found a better service</option>
                        <option>Too expensive</option>
                        <option>Dissatisfied with service</option>
                        <option>Other</option>
                    </select>
                </div>
                <div class="form-group" style="margin-top: 20px;">
                    <label for="deactivatePassword">Enter your password to confirm</label>
                    <input type="password" class="form-control" id="deactivatePassword">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeactivateBtn">Cancel</button>
                <button class="btn btn-danger" id="confirmDeactivateBtn">Deactivate Account</button>
            </div>
        </div>
    </div>

    <!-- Delete Account Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Delete Account</h3>
                <button class="modal-close" id="closeDeleteModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background-color: rgba(211, 47, 47, 0.1); padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                    <h4 style="color: var(--danger); margin-bottom: 10px;"><i class="fas fa-exclamation-triangle"></i> Warning</h4>
                    <p>This action is irreversible. All your account data will be permanently deleted, including transaction history, saved payees, and personal information. You will no longer be able to access any services associated with this account.</p>
                </div>
                <p style="margin-bottom: 15px;">To confirm account deletion, please enter your password and answer your security question.</p>
                <div class="form-group">
                    <label for="deletePassword">Password</label>
                    <input type="password" class="form-control" id="deletePassword">
                </div>
                <div class="form-group">
                    <label for="securityAnswer">What was your first pet's name?</label>
                    <input type="text" class="form-control" id="securityAnswer">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteBtn">Cancel</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">Permanently Delete Account</button>
            </div>
        </div>
    </div>

    <!-- Risk Alert Modal -->
    <div class="modal" id="riskAlertModal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header" style="background-color: var(--danger); color: white;">
                <h3><i class="fas fa-exclamation-triangle"></i> Security Alert</h3>
                <button class="modal-close" style="color: white;" id="closeRiskAlertModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-shield-alt" style="font-size: 3rem; color: var(--danger); margin-bottom: 15px;"></i>
                    <h4 id="riskAlertTitle">Unusual Activity Detected</h4>
                    <p id="riskAlertMessage">Our system has detected unusual activity on your account. For your security, we've temporarily blocked access to certain features.</p>
                </div>
            </div>
            <div class="modal-footer" style="justify-content: center;">
                <button class="btn btn-primary" id="acknowledgeRiskBtn">Acknowledge</button>
            </div>
        </div>
    </div>

    <!-- Transfer Confirmation Modal -->
    <div class="modal" id="transferConfirmModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header" style="background-color: var(--success); color: white;">
                <h3><i class="fas fa-check-circle"></i> Transfer Confirmation</h3>
                <button class="modal-close" style="color: white;" id="closeTransferConfirmModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-paper-plane" style="font-size: 3rem; color: var(--success); margin-bottom: 15px;"></i>
                    <h4>Transfer Scheduled Successfully</h4>
                    <div style="background-color: var(--primary-light); padding: 15px; border-radius: 5px; margin: 15px 0;">
                        <p style="font-weight: 600; margin-bottom: 5px;">Amount: <span id="confirmAmount">$250.00</span></p>
                        <p style="margin-bottom: 5px;">From: <span id="confirmFrom">Checking Account (****3456)</span></p>
                        <p style="margin-bottom: 5px;">To: <span id="confirmTo">Alice Johnson</span></p>
                        <p style="margin-bottom: 5px;">Date: <span id="confirmDate">Today</span></p>
                        <p>Reference: <span id="confirmReference">Rent payment</span></p>
                    </div>
                    <p>A confirmation has been sent to your registered email address.</p>
                </div>
            </div>
            <div class="modal-footer" style="justify-content: center;">
                <button class="btn btn-primary" id="doneTransferBtn">Done</button>
            </div>
        </div>
    </div>

    <!-- New Account Modal -->
    <div class="modal" id="newAccountModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Open New Account</h3>
                <button class="modal-close" id="closeNewAccountModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Account Type</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
                        <div class="card" style="cursor: pointer; text-align: center; padding: 15px; border: 2px solid var(--primary-dark);" id="checkingAccountOption">
                            <i class="fas fa-money-bill-wave" style="font-size: 2rem; color: var(--accent-dark); margin-bottom: 10px;"></i>
                            <h4>Checking Account</h4>
                            <p style="font-size: 0.9rem;">Everyday transactions with debit card access</p>
                        </div>
                        <div class="card" style="cursor: pointer; text-align: center; padding: 15px; border: 2px solid var(--primary-dark);" id="savingsAccountOption">
                            <i class="fas fa-piggy-bank" style="font-size: 2rem; color: var(--accent-dark); margin-bottom: 10px;"></i>
                            <h4>Savings Account</h4>
                            <p style="font-size: 0.9rem;">Earn interest on your savings</p>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="accountNickname">Account Nickname (Optional)</label>
                    <input type="text" class="form-control" id="accountNickname" placeholder="e.g., Emergency Fund">
                </div>
                <div class="form-group">
                    <label for="initialDeposit">Initial Deposit</label>
                    <input type="number" class="form-control" id="initialDeposit" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="agreeTerms">
                        I agree to the terms and conditions and authorize SecureBank Pro to open this account.
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelNewAccountBtn">Cancel</button>
                <button class="btn btn-primary" id="confirmNewAccountBtn" disabled>Open Account</button>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Profile</h3>
                <button class="modal-close" id="closeEditProfileModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label for="editFirstName">First Name</label>
                        <input type="text" class="form-control" id="editFirstName" value="John">
                    </div>
                    <div class="form-group">
                        <label for="editLastName">Last Name</label>
                        <input type="text" class="form-control" id="editLastName" value="Doe">
                    </div>
                    <div class="form-group">
                        <label for="editEmail">Email</label>
                        <input type="email" class="form-control" id="editEmail" value="john.doe@example.com">
                    </div>
                    <div class="form-group">
                        <label for="editPhone">Phone</label>
                        <input type="tel" class="form-control" id="editPhone" value="(123) 456-7890">
                    </div>
                    <div class="form-group">
                        <label for="editDob">Date of Birth</label>
                        <input type="date" class="form-control" id="editDob" value="1985-01-15">
                    </div>
                    <div class="form-group">
                        <label for="editAddress">Address</label>
                        <input type="text" class="form-control" id="editAddress" value="123 Main St, Anytown, USA">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelEditProfileBtn">Cancel</button>
                <button class="btn btn-primary" id="saveProfileBtn">Save Changes</button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const modeToggle = document.getElementById('modeToggle');
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.section');
        const sectionTitle = document.getElementById('sectionTitle');
        const notificationBell = document.getElementById('notificationBell');
        const notificationCount = document.getElementById('notificationCount');
        const notificationModal = document.getElementById('notificationModal');
        const closeNotificationModal = document.getElementById('closeNotificationModal');
        const termsModal = document.getElementById('termsModal');
        const closeTermsModal = document.getElementById('closeTermsModal');
        const acceptTermsBtn = document.getElementById('acceptTermsBtn');
        const balanceToggle = document.getElementById('balanceToggle');
        const totalBalance = document.getElementById('totalBalance');
        const deactivateBtn = document.getElementById('deactivateBtn');
        const deleteBtn = document.getElementById('deleteBtn');
        const deactivateModal = document.getElementById('deactivateModal');
        const deleteModal = document.getElementById('deleteModal');
        const closeDeactivateModal = document.getElementById('closeDeactivateModal');
        const closeDeleteModal = document.getElementById('closeDeleteModal');
        const cancelDeactivateBtn = document.getElementById('cancelDeactivateBtn');
        const confirmDeactivateBtn = document.getElementById('confirmDeactivateBtn');
        const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
        const riskProgress = document.getElementById('riskProgress');
        const riskValue = document.getElementById('riskValue');
        const riskStatus = document.getElementById('riskStatus');
        const riskDescription = document.getElementById('riskDescription');
        const activityLog = document.getElementById('activityLog');
        const refreshRiskBtn = document.getElementById('refreshRiskBtn');
        const viewFullLogBtn = document.getElementById('viewFullLogBtn');
        const riskAlertModal = document.getElementById('riskAlertModal');
        const closeRiskAlertModal = document.getElementById('closeRiskAlertModal');
        const acknowledgeRiskBtn = document.getElementById('acknowledgeRiskBtn');
        const riskAlertTitle = document.getElementById('riskAlertTitle');
        const riskAlertMessage = document.getElementById('riskAlertMessage');
        const transferForm = document.getElementById('transferForm');
        const toAccount = document.getElementById('toAccount');
        const recipientGroup = document.getElementById('recipientGroup');
        const accountNumberGroup = document.getElementById('accountNumberGroup');
        const routingNumberGroup = document.getElementById('routingNumberGroup');
        const transferConfirmModal = document.getElementById('transferConfirmModal');
        const closeTransferConfirmModal = document.getElementById('closeTransferConfirmModal');
        const doneTransferBtn = document.getElementById('doneTransferBtn');
        const confirmAmount = document.getElementById('confirmAmount');
        const confirmFrom = document.getElementById('confirmFrom');
        const confirmTo = document.getElementById('confirmTo');
        const confirmDate = document.getElementById('confirmDate');
        const confirmReference = document.getElementById('confirmReference');
        const openNewAccountBtn = document.getElementById('openNewAccountBtn');
        const newAccountModal = document.getElementById('newAccountModal');
        const closeNewAccountModal = document.getElementById('closeNewAccountModal');
        const cancelNewAccountBtn = document.getElementById('cancelNewAccountBtn');
        const confirmNewAccountBtn = document.getElementById('confirmNewAccountBtn');
        const agreeTerms = document.getElementById('agreeTerms');
        const editProfileBtn = document.getElementById('editProfileBtn');
        const editProfileModal = document.getElementById('editProfileModal');
        const closeEditProfileModal = document.getElementById('closeEditProfileModal');
        const cancelEditProfileBtn = document.getElementById('cancelEditProfileBtn');
        const saveProfileBtn = document.getElementById('saveProfileBtn');
        const chatbotMessages = document.getElementById('chatbotMessages');
        const chatbotInput = document.getElementById('chatbotInput');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        const chatbotSummary = document.getElementById('chatbotSummary');
        const weekBtn = document.getElementById('weekBtn');
        const monthBtn = document.getElementById('monthBtn');
        const yearBtn = document.getElementById('yearBtn');

        // Variables
        let isBalanceVisible = true;
        let riskLevel = 30;
        let abnormalActivityTimer = null;
        let abnormalActivitySeconds = 0;
        let isAccountBlocked = false;
        let actionLogs = [];
        let chatHistory = [];
        let currentChartView = 'month';

        // Initialize Charts
        let spendingChart, accountsChart, riskChart;

        // Initialize the application
        function init() {
            // Show terms modal on first load
            setTimeout(() => {
                termsModal.classList.add('active');
            }, 1000);

            // Initialize charts
            initCharts();

            // Start monitoring user activity
            startActivityMonitoring();

            // Load action logs from localStorage if available
            const savedLogs = localStorage.getItem('actionLogs');
            if (savedLogs) {
                actionLogs = JSON.parse(savedLogs);
            } else {
                // Initial logs
                logAction('Page loaded');
                logAction('User logged in');
            }
        }

        // Initialize charts
        function initCharts() {
            // Spending Chart
            const spendingCtx = document.getElementById('spendingChart').getContext('2d');
            spendingChart = new Chart(spendingCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Spending',
                        data: [1200, 1900, 1500, 2000, 2300, 2345, 1800, 2100, 1900, 2200, 2100, 2400],
                        borderColor: '#2e7d32',
                        backgroundColor: 'rgba(46, 125, 50, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Accounts Chart
            const accountsCtx = document.getElementById('accountsChart').getContext('2d');
            accountsChart = new Chart(accountsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Checking', 'Savings', 'Credit Card'],
                    datasets: [{
                        data: [5678.90, 6777.88, -1234.56],
                        backgroundColor: [
                            '#4caf50',
                            '#81c784',
                            '#ef5350'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': $' + context.raw.toFixed(2);
                                }
                            }
                        }
                    }
                }
            });

            // Risk Chart
            const riskCtx = document.getElementById('riskChart').getContext('2d');
            riskChart = new Chart(riskCtx, {
                type: 'bar',
                data: {
                    labels: ['12am', '3am', '6am', '9am', '12pm', '3pm', '6pm', '9pm'],
                    datasets: [{
                        label: 'Risk Level',
                        data: [10, 5, 8, 15, 25, 30, 20, 15],
                        backgroundColor: [
                            'rgba(46, 125, 50, 0.7)',
                            'rgba(46, 125, 50, 0.7)',
                            'rgba(46, 125, 50, 0.7)',
                            'rgba(255, 152, 0, 0.7)',
                            'rgba(211, 47, 47, 0.7)',
                            'rgba(255, 152, 0, 0.7)',
                            'rgba(46, 125, 50, 0.7)',
                            'rgba(46, 125, 50, 0.7)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // Update spending chart based on view
        function updateSpendingChart(view) {
            currentChartView = view;
            
            if (view === 'week') {
                spendingChart.data.labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                spendingChart.data.datasets[0].data = [120, 85, 90, 150, 200, 180, 100];
            } else if (view === 'month') {
                spendingChart.data.labels = ['Week 1', 'Week 2', 'Week 3', 'Week 4'];
                spendingChart.data.datasets[0].data = [500, 600, 700, 545];
            } else if (view === 'year') {
                spendingChart.data.labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                spendingChart.data.datasets[0].data = [1200, 1900, 1500, 2000, 2300, 2345, 1800, 2100, 1900, 2200, 2100, 2400];
            }
            
            spendingChart.update();
        }

        function logAction(action) {
            const now = new Date();
            const timestamp = now.toISOString();
            const timeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' });

            const logEntry = {
                timestamp,
                timeString: `[${timeString}]`,
                action,
                riskImpact: calculateRiskImpact(action)
            };

            actionLogs.push(logEntry);

            // Update localStorage
            localStorage.setItem('actionLogs', JSON.stringify(actionLogs));

            // Update risk level
            updateRiskLevel(logEntry.riskImpact);

            // Update activity log UI
            updateActivityLog();

            return logEntry;
        }

          

    // Calculate risk impact of an action
    function calculateRiskImpact(action) {
        const riskyActions = ['transfer', 'login', 'password', 'delete', 'deactivate'];
        const sensitiveActions = ['profile', 'account', 'security', 'settings'];
        
        if (riskyActions.some(keyword => action.toLowerCase().includes(keyword))) {
            return 5; // Higher risk impact
        } else if (sensitiveActions.some(keyword => action.toLowerCase().includes(keyword))) {
            return 3; // Moderate risk impact
        }
        return 1; // Low risk impact
    }

    // Update risk level based on action
    function updateRiskLevel(impact) {
        // Increase risk level based on impact
        riskLevel = Math.min(100, riskLevel + impact);
        
        // Gradually decrease risk level over time
        if (riskLevel > 30) {
            riskLevel = Math.max(30, riskLevel - 1);
        }
        
        // Update UI
        riskProgress.style.width = `${riskLevel}%`;
        riskValue.textContent = `${riskLevel}%`;
        
        // Update risk status
        if (riskLevel > 70) {
            riskStatus.textContent = 'High Risk';
            riskStatus.className = 'status status-failed';
            riskDescription.textContent = 'Unusual activity detected. Please verify your recent actions.';
            
            // Show warning if not already shown
            if (riskLevel > 80 && !isAccountBlocked) {
                showRiskAlert('High Risk Activity', 'Your account has been flagged for unusual activity. Some features may be restricted.');
            }
            
            // Block account if risk reaches 100
            if (riskLevel >= 100) {
                blockAccount();
            }
        } else if (riskLevel > 40) {
            riskStatus.textContent = 'Medium Risk';
            riskStatus.className = 'status status-pending';
            riskDescription.textContent = 'Moderate activity detected. No action required at this time.';
        } else {
            riskStatus.textContent = 'Normal Activity';
            riskStatus.className = 'status status-completed';
            riskDescription.textContent = 'Your account shows normal activity patterns. No suspicious behavior detected.';
        }
    }

    // Update activity log UI
    function updateActivityLog() {
        // Show only the last 5 entries
        const recentLogs = actionLogs.slice(-5);
        
        activityLog.innerHTML = recentLogs.map(log => `
            <div class="log-entry">
                <span class="log-time">${log.timeString}</span>
                <span>${log.action}</span>
            </div>
        `).join('');
    }

    // Show risk alert modal
    function showRiskAlert(title, message) {
        riskAlertTitle.textContent = title;
        riskAlertMessage.textContent = message;
        riskAlertModal.classList.add('active');
        
        // Add pulse animation to risk section in sidebar
        const riskNavItem = document.querySelector('.nav-link[data-section="risk"]');
        riskNavItem.classList.add('pulse');
        
        // Add notification
        addNotification(title, message);
    }

    // Block account due to high risk
    function blockAccount() {
        isAccountBlocked = true;
        showRiskAlert('Account Temporarily Blocked', 'For your security, we have temporarily blocked access to your account. Please contact customer support.');
        
        // Disable all action buttons
        document.querySelectorAll('button').forEach(button => {
            if (!button.id.includes('close') && !button.id.includes('cancel') && button.id !== 'acknowledgeRiskBtn') {
                button.disabled = true;
            }
        });
        
        logAction('Account blocked due to high risk activity');
    }

    // Start monitoring user activity
    function startActivityMonitoring() {
        // Track mouse movements
        document.addEventListener('mousemove', () => {
            resetAbnormalActivityTimer();
        });
        
        // Track clicks
        document.addEventListener('click', () => {
            resetAbnormalActivityTimer();
        });
        
        // Track key presses
        document.addEventListener('keydown', () => {
            resetAbnormalActivityTimer();
        });
    }

    // Reset abnormal activity timer
    function resetAbnormalActivityTimer() {
        if (abnormalActivityTimer) {
            clearTimeout(abnormalActivityTimer);
        }
        
        abnormalActivitySeconds = 0;
        abnormalActivityTimer = setInterval(() => {
            abnormalActivitySeconds++;
            
            if (abnormalActivitySeconds === 40) {
                // 40 seconds of inactivity - medium risk
                logAction('Abnormal activity detected - prolonged inactivity');
                showRiskAlert('Unusual Activity', 'We noticed unusual activity on your account. Please verify it\'s you.');
            } else if (abnormalActivitySeconds === 50) {
                // 50 seconds of inactivity - high risk
                logAction('Account locked due to prolonged inactivity');
                blockAccount();
                clearInterval(abnormalActivityTimer);
            }
        }, 1000);
    }

    // Add notification
    function addNotification(title, message) {
        // Update notification count
        const currentCount = parseInt(notificationCount.textContent);
        notificationCount.textContent = currentCount + 1;
        
        // Add to notification list (in a real app, this would be more sophisticated)
        // Here we just increment the count
    }

    // Handle chatbot messages
    async function handleChatbotMessage(message) {
        // Add user message to chat
        addChatMessage(message, 'user');
        
        // Generate bot response
        const botResponse = await generateBotResponse(message);
        
        // Add bot response to chat
        addChatMessage(botResponse, 'bot');
        
        // Update chat summary
        updateChatSummary();
    }

    // Add message to chat
    function addChatMessage(message, sender) {
        const messageElement = document.createElement('div');
        messageElement.className = `message ${sender}-message`;
        messageElement.textContent = message;
        chatbotMessages.appendChild(messageElement);
        
        // Scroll to bottom
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        
        // Add to chat history
        chatHistory.push({
            sender,
            message,
            timestamp: new Date().toISOString()
        });
    }

    // Generate bot response (simulated)
    async function generateBotResponse(userMessage) {
        // In a real implementation, this would call the Ollama API
        // For this example, we'll simulate responses
        
        const responses = {
            'hello': 'Hello! How can I assist you with your banking today?',
            'balance': 'Your current balance is $12,456.78 across all accounts.',
            'transfer': 'You can transfer money by going to the "Transfer Money" section. Would you like me to guide you through the process?',
            'transaction': 'Your recent transactions include a $250 transfer to Alice (pending), a $3,450 salary deposit, and a $120.75 electric bill payment.',
            'help': 'I can help you check balances, review transactions, transfer money, and answer questions about your account. What do you need help with?',
            'default': 'I\'m sorry, I didn\'t understand that. Could you please rephrase your question? I can help with account balances, transactions, transfers, and more.'
        };
        
        // Simulate API delay
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        // Check for keywords in the message
        userMessage = userMessage.toLowerCase();
        
        if (userMessage.includes('hello') || userMessage.includes('hi')) {
            return responses['hello'];
        } else if (userMessage.includes('balance')) {
            return responses['balance'];
        } else if (userMessage.includes('transfer')) {
            return responses['transfer'];
        } else if (userMessage.includes('transaction')) {
            return responses['transaction'];
        } else if (userMessage.includes('help')) {
            return responses['help'];
        } else {
            return responses['default'];
        }
    }

    // Update chat summary
    function updateChatSummary() {
        // Extract key information from chat history
        const topics = [];
        
        chatHistory.forEach(entry => {
            if (entry.sender === 'user') {
                if (entry.message.toLowerCase().includes('balance')) topics.push('Account Balance');
                if (entry.message.toLowerCase().includes('transfer')) topics.push('Money Transfer');
                if (entry.message.toLowerCase().includes('transaction')) topics.push('Transactions');
            }
        });
        
        // Create summary
        let summary = '<h4>Conversation Summary</h4>';
        
        if (topics.length > 0) {
            summary += '<p>We discussed the following topics:</p><ul>';
            const uniqueTopics = [...new Set(topics)];
            uniqueTopics.forEach(topic => {
                summary += `<li>${topic}</li>`;
            });
            summary += '</ul>';
        } else {
            summary += '<p>No specific topics were discussed yet.</p>';
        }
        
        // Add action items if any
        if (topics.includes('Money Transfer')) {
            summary += '<p><strong>Action Item:</strong> You mentioned transfers. Remember you can initiate transfers from the "Transfer Money" section.</p>';
        }
        
        chatbotSummary.innerHTML = summary;
    }

    // Event Listeners
    modeToggle.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        
        const toggleIcon = modeToggle.querySelector('.fa-toggle-off, .fa-toggle-on');
        if (document.body.classList.contains('dark-mode')) {
            toggleIcon.classList.remove('fa-toggle-off');
            toggleIcon.classList.add('fa-toggle-on');
            logAction('Switched to dark mode');
        } else {
            toggleIcon.classList.remove('fa-toggle-on');
            toggleIcon.classList.add('fa-toggle-off');
            logAction('Switched to light mode');
        }
        
        // Update charts for dark mode
        updateChartThemes();
    });

    function updateChartThemes() {
        const isDarkMode = document.body.classList.contains('dark-mode');
        const gridColor = isDarkMode ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';
        
        // Update spending chart
        spendingChart.options.scales.y.grid.color = gridColor;
        spendingChart.update();
        
        // Update risk chart
        riskChart.options.scales.y.grid.color = gridColor;
        riskChart.update();
    }

    // Navigation
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            
            // Remove active class from all links
            navLinks.forEach(navLink => {
                navLink.classList.remove('active');
            });
            
            // Add active class to clicked link
            link.classList.add('active');
            
            // Hide all sections
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            const sectionId = link.getAttribute('data-section');
            document.querySelector(`.${sectionId}-section`).classList.add('active');
            
            // Update section title
            sectionTitle.textContent = link.querySelector('span').textContent;
            
            // Log the action
            logAction(`Navigated to ${sectionTitle.textContent}`);
            
            // Update charts if necessary
            if (sectionId === 'dashboard') {
                spendingChart.update();
            } else if (sectionId === 'accounts') {
                accountsChart.update();
            } else if (sectionId === 'risk') {
                riskChart.update();
                // Remove pulse animation when visiting risk section
                link.classList.remove('pulse');
            }
        });
    });

    // Toggle balance visibility
    balanceToggle.addEventListener('click', () => {
        isBalanceVisible = !isBalanceVisible;
        
        if (isBalanceVisible) {
            totalBalance.textContent = '$12,456.78';
            balanceToggle.classList.remove('fa-eye-slash');
            balanceToggle.classList.add('fa-eye');
            logAction('Balance shown');
        } else {
            totalBalance.textContent = '';
            balanceToggle.classList.remove('fa-eye');
            balanceToggle.classList.add('fa-eye-slash');
            logAction('Balance hidden');
        }
    });

    // Notifications
    notificationBell.addEventListener('click', () => {
        notificationModal.classList.add('active');
        notificationCount.textContent = '0';
        logAction('Viewed notifications');
    });

    closeNotificationModal.addEventListener('click', () => {
        notificationModal.classList.remove('active');
    });

    // Terms and Conditions
    acceptTermsBtn.addEventListener('click', () => {
        termsModal.classList.remove('active');
        logAction('Accepted terms and conditions');
    });

    closeTermsModal.addEventListener('click', () => {
        termsModal.classList.remove('active');
    });

    // Account Deactivation/Deletion
    deactivateBtn.addEventListener('click', () => {
        deactivateModal.classList.add('active');
        logAction('Opened account deactivation modal');
    });

    deleteBtn.addEventListener('click', () => {
        deleteModal.classList.add('active');
        logAction('Opened account deletion modal');
    });

    closeDeactivateModal.addEventListener('click', () => {
        deactivateModal.classList.remove('active');
    });

    closeDeleteModal.addEventListener('click', () => {
        deleteModal.classList.remove('active');
    });

    cancelDeactivateBtn.addEventListener('click', () => {
        deactivateModal.classList.remove('active');
    });

    cancelDeleteBtn.addEventListener('click', () => {
        deleteModal.classList.remove('active');
    });

    confirmDeactivateBtn.addEventListener('click', () => {
        alert('Account deactivation request submitted. A confirmation has been sent to your email.');
        deactivateModal.classList.remove('active');
        logAction('Requested account deactivation');
    });

    confirmDeleteBtn.addEventListener('click', () => {
        const password = document.getElementById('deletePassword').value;
        const securityAnswer = document.getElementById('securityAnswer').value;
        
        if (password === 'password123' && securityAnswer.toLowerCase() === 'max') {
            alert('Account deletion request submitted. Your account will be permanently deleted within 30 days.');
            deleteModal.classList.remove('active');
            logAction('Requested account deletion');
        } else {
            alert('Incorrect password or security answer. Please try again.');
        }
    });

    // Risk Monitoring
    refreshRiskBtn.addEventListener('click', () => {
        riskLevel = Math.max(30, riskLevel - 10);
        updateRiskLevel(0);
        logAction('Refreshed risk analysis');
    });

    viewFullLogBtn.addEventListener('click', () => {
        alert('In a real application, this would show the full activity log or download it as a file.');
        logAction('Viewed full activity log');
    });

    acknowledgeRiskBtn.addEventListener('click', () => {
        riskAlertModal.classList.remove('active');
        
        // Reduce risk level when acknowledged
        riskLevel = Math.max(30, riskLevel - 20);
        updateRiskLevel(0);
        
        // Remove pulse animation from risk nav item
        const riskNavItem = document.querySelector('.nav-link[data-section="risk"]');
        riskNavItem.classList.remove('pulse');
        
        logAction('Acknowledged risk alert');
    });

    closeRiskAlertModal.addEventListener('click', () => {
        riskAlertModal.classList.remove('active');
    });

    // Transfer Money
    toAccount.addEventListener('change', (e) => {
        const value = e.target.value;
        
        if (value === 'External Bank Transfer') {
            recipientGroup.style.display = 'block';
            accountNumberGroup.style.display = 'block';
            routingNumberGroup.style.display = 'block';
        } else if (value === 'Pay a Friend') {
            recipientGroup.style.display = 'block';
            accountNumberGroup.style.display = 'none';
            routingNumberGroup.style.display = 'none';
        } else {
            recipientGroup.style.display = 'none';
            accountNumberGroup.style.display = 'none';
            routingNumberGroup.style.display = 'none';
        }
    });

    transferForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        // Get form values
        const fromAccount = document.getElementById('fromAccount').value;
        const toAccountValue = document.getElementById('toAccount').value;
        const amount = document.getElementById('amount').value;
        const description = document.getElementById('description').value || 'No description';
        const transferDate = document.getElementById('transferDate').value;
        
        // Set confirmation values
        confirmAmount.textContent = `$${amount}`;
        confirmFrom.textContent = fromAccount.split(' - ')[0];
        
        if (toAccountValue === 'Internal Transfer') {
            confirmTo.textContent = 'Internal Transfer';
        } else if (toAccountValue === 'External Bank Transfer') {
            const recipient = document.getElementById('recipient').value || 'Unknown';
            confirmTo.textContent = `${recipient} (External)`;
        } else if (toAccountValue === 'Pay a Friend') {
            const recipient = document.getElementById('recipient').value || 'Unknown';
            confirmTo.textContent = recipient;
        }
        
        confirmDate.textContent = transferDate;
        confirmReference.textContent = description;
        
        // Show confirmation modal
        transferConfirmModal.classList.add('active');
        
        // Log the transfer
        logAction(`Initiated transfer: $${amount} from ${fromAccount.split(' - ')[0]} to ${confirmTo.textContent}`);
        
        // Reset form
        transferForm.reset();
    });

    closeTransferConfirmModal.addEventListener('click', () => {
        transferConfirmModal.classList.remove('active');
    });

    doneTransferBtn.addEventListener('click', () => {
        transferConfirmModal.classList.remove('active');
    });

    // New Account
    openNewAccountBtn.addEventListener('click', () => {
        newAccountModal.classList.add('active');
        logAction('Opened new account modal');
    });

    closeNewAccountModal.addEventListener('click', () => {
        newAccountModal.classList.remove('active');
    });

    cancelNewAccountBtn.addEventListener('click', () => {
        newAccountModal.classList.remove('active');
    });

    const checkingAccountOption = document.getElementById('checkingAccountOption');
    const savingsAccountOption = document.getElementById('savingsAccountOption');
    let selectedAccountType = '';

    checkingAccountOption.addEventListener('click', () => {
        selectedAccountType = 'Checking';
        checkingAccountOption.style.borderColor = '#2e7d32';
        savingsAccountOption.style.borderColor = '#a5d6a7';
        confirmNewAccountBtn.disabled = !agreeTerms.checked;
    });

    savingsAccountOption.addEventListener('click', () => {
        selectedAccountType = 'Savings';
        savingsAccountOption.style.borderColor = '#2e7d32';
        checkingAccountOption.style.borderColor = '#a5d6a7';
        confirmNewAccountBtn.disabled = !agreeTerms.checked;
    });

    agreeTerms.addEventListener('change', () => {
        confirmNewAccountBtn.disabled = !(agreeTerms.checked && selectedAccountType);
    });

    confirmNewAccountBtn.addEventListener('click', () => {
        const nickname = document.getElementById('accountNickname').value || selectedAccountType;
        const deposit = document.getElementById('initialDeposit').value || '0';
        
        alert(`Your new ${selectedAccountType} account "${nickname}" has been opened with an initial deposit of $${deposit}.`);
        newAccountModal.classList.remove('active');
        logAction(`Opened new ${selectedAccountType} account with $${deposit} deposit`);
    });

    // Edit Profile
    editProfileBtn.addEventListener('click', () => {
        editProfileModal.classList.add('active');
        logAction('Opened profile editor');
    });

    closeEditProfileModal.addEventListener('click', () => {
        editProfileModal.classList.remove('active');
    });

    cancelEditProfileBtn.addEventListener('click', () => {
        editProfileModal.classList.remove('active');
    });

    saveProfileBtn.addEventListener('click', () => {
        const firstName = document.getElementById('editFirstName').value;
        const lastName = document.getElementById('editLastName').value;
        const email = document.getElementById('editEmail').value;
        const phone = document.getElementById('editPhone').value;
        const dob = document.getElementById('editDob').value;
        const address = document.getElementById('editAddress').value;
        
        // Update profile fields
        document.getElementById('firstName').value = firstName;
        document.getElementById('lastName').value = lastName;
        document.getElementById('email').value = email;
        document.getElementById('phone').value = phone;
        
        const dobDate = new Date(dob);
        document.getElementById('dob').value = dobDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
        
        document.getElementById('address').value = address;
        
        // Update avatar with new name
        const avatar = document.querySelector('.user-info img');
        avatar.src = `https://ui-avatars.com/api/?name=${firstName}+${lastName}&background=2e7d32&color=fff`;
        
        editProfileModal.classList.remove('active');
        logAction('Updated profile information');
    });

    // Chatbot
    sendMessageBtn.addEventListener('click', () => {
        const message = chatbotInput.value.trim();
        if (message) {
            handleChatbotMessage(message);
            chatbotInput.value = '';
        }
    });

    chatbotInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const message = chatbotInput.value.trim();
            if (message) {
                handleChatbotMessage(message);
                chatbotInput.value = '';
            }
        }
    });

    // Spending Chart Timeframe
    weekBtn.addEventListener('click', () => {
        updateSpendingChart('week');
        weekBtn.classList.add('btn-primary');
        weekBtn.classList.remove('btn-secondary');
        monthBtn.classList.add('btn-secondary');
        monthBtn.classList.remove('btn-primary');
        yearBtn.classList.add('btn-secondary');
        yearBtn.classList.remove('btn-primary');
        logAction('Viewed weekly spending chart');
    });

    monthBtn.addEventListener('click', () => {
        updateSpendingChart('month');
        monthBtn.classList.add('btn-primary');
        monthBtn.classList.remove('btn-secondary');
        weekBtn.classList.add('btn-secondary');
        weekBtn.classList.remove('btn-primary');
        yearBtn.classList.add('btn-secondary');
        yearBtn.classList.remove('btn-primary');
        logAction('Viewed monthly spending chart');
    });

    yearBtn.addEventListener('click', () => {
        updateSpendingChart('year');
        yearBtn.classList.add('btn-primary');
        yearBtn.classList.remove('btn-secondary');
        weekBtn.classList.add('btn-secondary');
        weekBtn.classList.remove('btn-primary');
        monthBtn.classList.add('btn-secondary');
        monthBtn.classList.remove('btn-primary');
        logAction('Viewed yearly spending chart');
    });

    // Initialize the app
    init();


            // ======================== BEHAVIOR TRACKER =======================
// Behavior Tracker with Auto-Download to "JSON folder"
const BehaviorTracker = {
  metrics: {
    sessionStart: null,
    clicks: 0,
    keystrokes: 0,
    mouseDistance: 0,
    lastMousePosition: null,
    lastMouseTime: null
  },

  // Track if button was already clicked
  saveCompleted: false,

  init() {
    this.resetMetrics();
    this.setupEventListeners();
    this.addCaptureButton();
  },

  resetMetrics() {
    this.metrics = {
      sessionStart: new Date().toISOString(),
      clicks: 0,
      keystrokes: 0,
      mouseDistance: 0,
      lastMousePosition: null,
      lastMouseTime: null
    };
  },

  setupEventListeners() {
    document.addEventListener('click', () => this.metrics.clicks++);
    document.addEventListener('keydown', () => this.metrics.keystrokes++);
    document.addEventListener('mousemove', (e) => {
      const now = Date.now();
      if (this.metrics.lastMousePosition && this.metrics.lastMouseTime) {
        const xDiff = e.clientX - this.metrics.lastMousePosition.x;
        const yDiff = e.clientY - this.metrics.lastMousePosition.y;
        this.metrics.mouseDistance += Math.sqrt(xDiff*xDiff + yDiff*yDiff);
      }
      this.metrics.lastMousePosition = { x: e.clientX, y: e.clientY };
      this.metrics.lastMouseTime = now;
    });
  },

  generateReport() {
    const currentTime = new Date();
    const sessionMinutes = (currentTime - new Date(this.metrics.sessionStart)) / 60000;
    
    return {
      timestamp: currentTime.toISOString(),
      sessionDuration: sessionMinutes.toFixed(2) + " minutes",
      clicksPerMin: (this.metrics.clicks / sessionMinutes).toFixed(2),
      keystrokesPerMin: (this.metrics.keystrokes / sessionMinutes).toFixed(2),
      mouseSpeedPxPerSec: (this.metrics.mouseDistance / (sessionMinutes * 60)).toFixed(2),
      totalClicks: this.metrics.clicks,
      totalKeystrokes: this.metrics.keystrokes,
      totalMouseDistance: Math.round(this.metrics.mouseDistance) + "px"
    };
  },

  async saveToJSON() {
    const report = this.generateReport();
    const datePrefix = new Date().toISOString().slice(0, 10);
    const timeSuffix = new Date().toISOString().slice(11, 19).replace(/:/g, '-');
   const fileName = `JSON_behavior_${datePrefix}_${timeSuffix}.json`;
    
    try {
      // Try backend save first
      const response = await fetch('/save-json', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          filename: fileName,
          content: JSON.stringify(report, null, 2)
        })
      });
      
      if (!response.ok) throw new Error('Server error');
      return true;
    } catch (error) {
      console.error("Backend save failed, using download fallback", error);
      // Fallback to client download
      const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = fileName;
      a.click();
      setTimeout(() => URL.revokeObjectURL(url), 100);
      return true;
    }
  },

  addCaptureButton() {
    const existingBtn = document.getElementById('captureMetricsBtn');
    if (existingBtn) return;

    const btn = document.createElement('button');
    btn.id = 'captureMetricsBtn';
    btn.innerHTML = ' Save to JSON Folder';
    Object.assign(btn.style, {
      position: 'fixed',
      bottom: '20px',
      right: '20px',
      zIndex: '9999',
      padding: '10px 15px',
      background: '#4CAF50',
      color: 'white',
      border: 'none',
      borderRadius: '5px',
      cursor: 'pointer',
      boxShadow: '0 2px 5px rgba(0,0,0,0.2)'
    });

    btn.addEventListener('click', async () => {
      if (this.saveCompleted) return;
      
      btn.disabled = true;
      btn.innerHTML = ' Saving...';
      
      try {
        const success = await this.saveToJSON();
        if (success) {
          btn.innerHTML = ' Saved!';
          btn.style.background = '#9E9E9E'; // Gray out
          this.saveCompleted = true;
        }
      } catch (error) {
        console.error("Save failed:", error);
        btn.innerHTML = ' Retry';
        btn.disabled = false;
      }
    });

    document.body.appendChild(btn);
  }
};

// Initialize when page loads
window.addEventListener('DOMContentLoaded', () => BehaviorTracker.init());
</script>