<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sage Social Media</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary-light: #e8f5e9;
            --primary: #c8e6c9;
            --primary-dark: #a5d6a7;
            --accent: #4caf50;
            --accent-dark: #388e3c;
            --text-primary: #212121;
            --text-secondary: #757575;
            --background: #ffffff;
            --card-bg: #f5f5f5;
            --danger: #f44336;
            --warning: #ff9800;
            --success: #4caf50;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary-light: #1b5e20;
            --primary: #2e7d32;
            --primary-dark: #388e3c;
            --accent: #4caf50;
            --accent-dark: #81c784;
            --text-primary: #f5f5f5;
            --text-secondary: #e0e0e0;
            --background: #121212;
            --card-bg: #1e1e1e;
            --danger: #d32f2f;
            --warning: #f57c00;
            --success: #388e3c;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text-primary);
            transition: var(--transition);
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: var(--primary);
            padding: 20px 0;
            transition: var(--transition);
            height: 100vh;
            position: fixed;
            overflow-y: auto;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .sidebar-header h2 {
            color: var(--text-primary);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }

        .sidebar-header h2 i {
            margin-right: 10px;
            color: var(--accent-dark);
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 1.2rem;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            margin: 5px 0;
            cursor: pointer;
            transition: var(--transition);
            border-radius: 0 30px 30px 0;
            color: var(--text-primary);
            text-decoration: none;
        }

        .menu-item:hover {
            background-color: var(--primary-dark);
        }

        .menu-item.active {
            background-color: var(--accent);
            color: white;
        }

        .menu-item i {
            margin-right: 10px;
            font-size: 1.1rem;
        }

        .menu-item span {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            margin-top: auto;
        }

        .user-profile {
            display: flex;
            align-items: center;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 10px;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .user-role {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 20px;
            transition: var(--transition);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-bar {
            position: relative;
        }

        .search-bar input {
            padding: 10px 15px 10px 40px;
            border-radius: 30px;
            border: none;
            background-color: var(--card-bg);
            color: var(--text-primary);
            width: 250px;
            transition: var(--transition);
        }

        .search-bar i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .notifications {
            position: relative;
        }

        .notification-icon {
            font-size: 1.2rem;
            color: var(--text-primary);
            cursor: pointer;
            position: relative;
        }

        .notification-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            font-weight: bold;
        }

        /* Dashboard Styles */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .card-action {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9rem;
        }

        .card-action:hover {
            color: var(--accent);
        }

        .stat-card {
            grid-column: span 3;
            display: flex;
            align-items: center;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.2rem;
        }

        .stat-info {
            display: flex;
            flex-direction: column;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .main-card {
            grid-column: span 8;
        }

        .side-card {
            grid-column: span 4;
        }

        .full-card {
            grid-column: span 12;
        }

        .activity-list {
            list-style: none;
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: var(--text-primary);
            font-weight: bold;
        }

        .activity-content {
            flex: 1;
        }

        .activity-user {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .activity-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .activity-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        .post-card {
            margin-bottom: 20px;
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: var(--text-primary);
            font-weight: bold;
        }

        .post-user {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .post-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        .post-content {
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .post-image {
            width: 100%;
            border-radius: 10px;
            margin-bottom: 15px;
            max-height: 300px;
            object-fit: cover;
        }

        .post-actions {
            display: flex;
            justify-content: space-between;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            padding-top: 10px;
        }

        .post-action {
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            font-size: 0.8rem;
            cursor: pointer;
        }

        .post-action i {
            margin-right: 5px;
        }

        .post-action:hover {
            color: var(--accent);
        }

        /* Risk Monitor Styles */
        .risk-monitor {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--shadow);
            z-index: 1000;
            width: 300px;
            transition: var(--transition);
        }

        .risk-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .risk-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .risk-value {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .risk-low {
            color: var(--success);
        }

        .risk-medium {
            color: var(--warning);
        }

        .risk-high {
            color: var(--danger);
        }

        .risk-bar {
            height: 10px;
            background-color: var(--primary);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .risk-progress {
            height: 100%;
            background-color: var(--success);
            width: 0%;
            transition: width 0.5s ease;
        }

        .risk-details {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 10px;
        }

        .risk-alert {
            background-color: var(--danger);
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.8rem;
            display: none;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--background);
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
        }

        .btn-primary {
            background-color: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--accent-dark);
        }

        .btn-secondary {
            background-color: var(--card-bg);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background-color: var(--primary);
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #d32f2f;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--primary);
            background-color: var(--card-bg);
            color: var(--text-primary);
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
        }

        /* Chat Styles */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 400px;
            border: 1px solid var(--primary);
            border-radius: 10px;
            overflow: hidden;
        }

        .chat-header {
            background-color: var(--primary);
            padding: 10px 15px;
            font-weight: 600;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: var(--card-bg);
        }

        .message {
            margin-bottom: 15px;
            max-width: 80%;
        }

        .message-user {
            font-weight: 600;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }

        .message-content {
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .message-incoming {
            align-self: flex-start;
        }

        .message-incoming .message-content {
            background-color: var(--primary);
            color: var(--text-primary);
            border-bottom-left-radius: 5px;
        }

        .message-outgoing {
            align-self: flex-end;
        }

        .message-outgoing .message-content {
            background-color: var(--accent);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .chat-input {
            display: flex;
            padding: 10px;
            background-color: var(--card-bg);
            border-top: 1px solid var(--primary);
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            border-radius: 30px;
            border: 1px solid var(--primary);
            background-color: var(--background);
            color: var(--text-primary);
            margin-right: 10px;
        }

        .chat-input button {
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        /* Notification Styles */
        .notification-dropdown {
            position: absolute;
            top: 40px;
            right: 0;
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            width: 300px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .notification-item {
            padding: 10px 15px;
            border-bottom: 1px solid var(--primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .notification-item:hover {
            background-color: var(--primary-light);
        }

        .notification-title {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .notification-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .notification-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Terms and Conditions */
        .terms-container {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            background-color: var(--card-bg);
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .terms-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .terms-text {
            font-size: 0.8rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        /* Animations */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-5px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(5px);
            }
        }

        .shake {
            animation: shake 0.5s;
        }

        /* Responsive Styles */
        @media (max-width: 1200px) {
            .stat-card {
                grid-column: span 6;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 70px;
                overflow: hidden;
            }
            .sidebar-header h2 span, .menu-item span {
                display: none;
            }
            .menu-item {
                justify-content: center;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                margin: 5px auto;
                padding: 0;
            }
            .menu-item i {
                margin-right: 0;
            }
            .sidebar-footer .user-info {
                display: none;
            }
            .main-content {
                margin-left: 70px;
            }
            .stat-card {
                grid-column: span 12;
            }
            .search-bar input {
                width: 150px;
            }
        }

        @media (max-width: 576px) {
            .sidebar {
                display: none;
            }
            .main-content {
                margin-left: 0;
            }
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            .header-actions {
                width: 100%;
                justify-content: space-between;
            }
            .search-bar input {
                width: 100%;
            }
        }

        /* Page Transitions */
        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .page.active {
            display: block;
        }

        /* Log Viewer */
        .log-viewer {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.8rem;
            white-space: pre-wrap;
        }

        .log-entry {
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .log-time {
            color: var(--accent);
        }

        .log-action {
            color: var(--text-primary);
            font-weight: 500;
        }

        .log-details {
            color: var(--text-secondary);
        }

        /* Enhanced chat styles */
        .typing-indicator .message-content {
            display: flex;
            align-items: center;
            height: 24px;
        }

        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--text-secondary);
            margin: 0 2px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .message-content-container {
            flex: 1;
        }

        .user-profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }

        .user-profile-modal .modal-content {
            background-color: var(--background);
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px;
        }

        .user-profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .user-avatar-large {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-right: 15px;
        }

        .user-info {
            flex: 1;
        }

        .mutual-friends {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .user-bio {
            margin: 15px 0;
            padding: 15px;
            background-color: var(--card-bg);
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .user-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* Enhanced log viewer styles */
        .log-header {
            font-weight: 600;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--primary);
        }

        .log-date-header {
            font-weight: 500;
            margin: 15px 0 5px;
            color: var(--accent);
        }

        .log-risk {
            margin-left: 5px;
            font-size: 0.8rem;
        }

        /* Switch Styles */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--accent);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--accent);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* PDF Report Styles */
        .report-option {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--card-bg);
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .report-option:hover {
            background-color: var(--primary-light);
        }

        .report-icon {
            margin-right: 10px;
            font-size: 1.2rem;
            color: var(--accent);
        }

        .report-info {
            flex: 1;
        }

        .report-title {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .report-description {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-leaf"></i> <span>Sage Social</span></h2>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            <div class="sidebar-menu">
                <a href="#" class="menu-item active" data-page="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="menu-item" data-page="profile">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
                <a href="#" class="menu-item" data-page="messages">
                    <i class="fas fa-envelope"></i>
                    <span>Messages</span>
                </a>
                <a href="#" class="menu-item" data-page="friends">
                    <i class="fas fa-users"></i>
                    <span>Friends</span>
                </a>
                <a href="#" class="menu-item" data-page="transactions">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Transactions</span>
                </a>
                <a href="#" class="menu-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <a href="#" class="menu-item" data-page="activity-logs">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Activity Logs</span>
                </a>
                <a href="#" class="menu-item" data-page="ollama-chat">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </a>
                <a href="#" class="menu-item" data-page="reports">
                    <i class="fas fa-file-pdf"></i>
                    <span>Reports</span>
                </a>
            </div>
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">JS</div>
                    <div class="user-info">
                        <span class="user-name">John Smith</span>
                        <span class="user-role">Premium Member</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <h1 class="page-title" id="pageTitle">Dashboard</h1>
                <div class="header-actions">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search...">
                    </div>
                    <div class="notifications">
                        <div class="notification-icon" id="notificationIcon">
                            <i class="fas fa-bell"></i>
                            <span class="notification-count">3</span>
                        </div>
                        <div class="notification-dropdown" id="notificationDropdown">
                            <div class="notification-item">
                                <div class="notification-title">New Message</div>
                                <div class="notification-text">You have a new message from Sarah</div>
                                <div class="notification-time">2 minutes ago</div>
                            </div>
                            <div class="notification-item">
                                <div class="notification-title">Friend Request</div>
                                <div class="notification-text">Michael sent you a friend request</div>
                                <div class="notification-time">15 minutes ago</div>
                            </div>
                            <div class="notification-item">
                                <div class="notification-title">Transaction Complete</div>
                                <div class="notification-text">Your payment of $25.00 has been processed</div>
                                <div class="notification-time">1 hour ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Page -->
            <div class="page active" id="dashboard">
                <div class="dashboard-grid">
                    <!-- Stat Cards -->
                    <div class="card stat-card">
                        <div class="stat-icon" style="background-color: rgba(76, 175, 80, 0.2); color: var(--accent);">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value">1,254</div>
                            <div class="stat-label">Friends</div>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-icon" style="background-color: rgba(33, 150, 243, 0.2); color: #2196F3;">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value">24</div>
                            <div class="stat-label">Messages</div>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-icon" style="background-color: rgba(255, 152, 0, 0.2); color: var(--warning);">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value">356</div>
                            <div class="stat-label">Likes</div>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-icon" style="background-color: rgba(156, 39, 176, 0.2); color: #9C27B0;">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value">89%</div>
                            <div class="stat-label">Engagement</div>
                        </div>
                    </div>

                    <!-- Main Content Card -->
                    <div class="card main-card">
                        <div class="card-header">
                            <div class="card-title">Activity Feed</div>
                            <div class="card-actions">
                                <button class="card-action"><i class="fas fa-ellipsis-h"></i></button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="post-card">
                                <div class="post-header">
                                    <div class="post-avatar">JS</div>
                                    <div>
                                        <div class="post-user">John Smith</div>
                                        <div class="post-time">2 hours ago</div>
                                    </div>
                                </div>
                                <div class="post-content">
                                    Just finished my morning hike! The view was absolutely breathtaking. Nature always helps me clear my mind and start the day fresh. #MorningHike #NatureLover
                                </div>
                                <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Mountain view" class="post-image">
                                <div class="post-actions">
                                    <div class="post-action"><i class="fas fa-heart"></i> 124</div>
                                    <div class="post-action"><i class="fas fa-comment"></i> 23</div>
                                    <div class="post-action"><i class="fas fa-share-alt"></i> Share</div>
                                </div>
                            </div>
                            <div class="post-card">
                                <div class="post-header">
                                    <div class="post-avatar">AM</div>
                                    <div>
                                        <div class="post-user">Alice Miller</div>
                                        <div class="post-time">4 hours ago</div>
                                    </div>
                                </div>
                                <div class="post-content">
                                    Working on a new project that I'm really excited about! Can't wait to share more details soon. #NewProject #ExcitingTimes
                                </div>
                                <div class="post-actions">
                                    <div class="post-action"><i class="fas fa-heart"></i> 89</div>
                                    <div class="post-action"><i class="fas fa-comment"></i> 14</div>
                                    <div class="post-action"><i class="fas fa-share-alt"></i> Share</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Side Card -->
                    <div class="card side-card">
                        <div class="card-header">
                            <div class="card-title">Recent Activity</div>
                            <div class="card-actions">
                                <button class="card-action"><i class="fas fa-sync-alt"></i></button>
                            </div>
                        </div>
                        <div class="card-body">
                            <ul class="activity-list">
                                <li class="activity-item">
                                    <div class="activity-avatar">TB</div>
                                    <div class="activity-content">
                                        <div class="activity-user">Tom Baker</div>
                                        <div class="activity-text">liked your post</div>
                                        <div class="activity-time">5 minutes ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-avatar">SP</div>
                                    <div class="activity-content">
                                        <div class="activity-user">Sarah Parker</div>
                                        <div class="activity-text">commented on your photo</div>
                                        <div class="activity-time">25 minutes ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-avatar">MJ</div>
                                    <div class="activity-content">
                                        <div class="activity-user">Mike Johnson</div>
                                        <div class="activity-text">shared your post</div>
                                        <div class="activity-time">1 hour ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-avatar">ES</div>
                                    <div class="activity-content">
                                        <div class="activity-user">Emma Smith</div>
                                        <div class="activity-text">started following you</div>
                                        <div class="activity-time">2 hours ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-avatar">DL</div>
                                    <div class="activity-content">
                                        <div class="activity-user">David Lee</div>
                                        <div class="activity-text">tagged you in a post</div>
                                        <div class="activity-time">3 hours ago</div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Graph Card -->
                    <div class="card full-card">
                        <div class="card-header">
                            <div class="card-title">Engagement Analytics</div>
                            <div class="card-actions">
                                <button class="card-action">Daily</button>
                                <button class="card-action active">Weekly</button>
                                <button class="card-action">Monthly</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="engagementChart" height="300"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Page -->
            <div class="page" id="profile">
                <div class="dashboard-grid">
                    <div class="card full-card">
                        <div class="card-header">
                            <div class="card-title">My Profile</div>
                            <div class="card-actions">
                                <button class="card-action"><i class="fas fa-edit"></i> Edit</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div style="display: flex; gap: 30px; margin-bottom: 30px;">
                                <div style="flex: 0 0 200px;">
                                    <div style="width: 150px; height: 150px; border-radius: 50%; background-color: var(--primary); display: flex; align-items: center; justify-content: center; font-size: 3rem; color: var(--text-primary); margin-bottom: 15px;">JS</div>
                                    <button class="btn btn-primary" style="width: 100%;">Change Photo</button>
                                </div>
                                <div style="flex: 1;">
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">
                                        <div class="form-group">
                                            <label class="form-label">First Name</label>
                                            <input type="text" class="form-control" value="John" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Last Name</label>
                                            <input type="text" class="form-control" value="Smith" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Email</label>
                                            <input type="email" class="form-control" value="john.smith@example.com" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Phone</label>
                                            <input type="tel" class="form-control" value="(555) 123-4567" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Location</label>
                                            <input type="text" class="form-control" value="New York, USA" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Member Since</label>
                                            <input type="text" class="form-control" value="January 2020" readonly>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Bio</label>
                                        <textarea class="form-control" rows="3" readonly>Digital creator, nature enthusiast, and coffee lover. Sharing my journey through life one post at a time.</textarea>
                                    </div>
                                </div>
                            </div>
                            <div style="border-top: 1px solid var(--primary); padding-top: 20px;">
                                <h3 style="margin-bottom: 15px;">Social Connections</h3>
                                <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                                    <button class="btn btn-secondary"><i class="fab fa-twitter"></i> Twitter</button>
                                    <button class="btn btn-secondary"><i class="fab fa-instagram"></i> Instagram</button>
                                    <button class="btn btn-secondary"><i class="fab fa-linkedin"></i> LinkedIn</button>
                                    <button class="btn btn-secondary"><i class="fab fa-github"></i> GitHub</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Messages Page -->
            <div class="page" id="messages">
                <div class="dashboard-grid">
                    <div class="card full-card">
                        <div class="card-header">
                            <div class="card-title">Messages</div>
                            <div class="card-actions">
                                <button class="card-action"><i class="fas fa-plus"></i> New</button>
                            </div>
                        </div>
                        <div class="card-body" style="display: flex; padding: 0;">
                            <div style="flex: 0 0 300px; border-right: 1px solid var(--primary);">
                                <div style="padding: 15px; border-bottom: 1px solid var(--primary);">
                                    <input type="text" class="form-control" placeholder="Search messages...">
                                </div>
                                <div style="overflow-y: auto; height: 500px;">
                                    <div class="activity-item" style="background-color: var(--primary-light);">
                                        <div class="activity-avatar">SP</div>
                                        <div class="activity-content">
                                            <div class="activity-user">Sarah Parker</div>
                                            <div class="activity-text">Hey, how are you doing?</div>
                                            <div class="activity-time">Today, 10:30 AM</div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-avatar">MJ</div>
                                        <div class="activity-content">
                                            <div class="activity-user">Mike Johnson</div>
                                            <div class="activity-text">About the project deadline...</div>
                                            <div class="activity-time">Yesterday</div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-avatar">AM</div>
                                        <div class="activity-content">
                                            <div class="activity-user">Alice Miller</div>
                                            <div class="activity-text">The documents you requested</div>
                                            <div class="activity-time">Monday</div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-avatar">TB</div>
                                        <div class="activity-content">
                                            <div class="activity-user">Tom Baker</div>
                                            <div class="activity-text">Let's meet for coffee</div>
                                            <div class="activity-time">Last week</div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-avatar">DL</div>
                                        <div class="activity-content">
                                            <div class="activity-user">David Lee</div>
                                            <div class="activity-text">Feedback on your proposal</div>
                                            <div class="activity-time">Last week</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="flex: 1; display: flex; flex-direction: column;">
                                <div style="padding: 15px; border-bottom: 1px solid var(--primary);">
                                    <div style="display: flex; align-items: center;">
                                        <div class="activity-avatar">SP</div>
                                        <div style="margin-left: 10px;">
                                            <div style="font-weight: 600;">Sarah Parker</div>
                                            <div style="font-size: 0.8rem; color: var(--text-secondary);">Online</div>
                                        </div>
                                    </div>
                                </div>
                                <div style="flex: 1; padding: 15px; overflow-y: auto; background-color: var(--card-bg);">
                                    <div style="display: flex; flex-direction: column; gap: 15px;">
                                        <div class="message message-incoming">
                                            <div class="message-user">Sarah Parker</div>
                                            <div class="message-content">Hey John, how are you doing?</div>
                                        </div>
                                        <div class="message message-outgoing">
                                            <div class="message-content">Hi Sarah! I'm doing great, thanks for asking. How about you?</div>
                                        </div>
                                        <div class="message message-incoming">
                                            <div class="message-user">Sarah Parker</div>
                                            <div class="message-content">I'm good too! Just wanted to check if you're still up for the hiking trip this weekend?</div>
                                        </div>
                                        <div class="message message-outgoing">
                                            <div class="message-content">Absolutely! I've been looking forward to it. The weather forecast looks perfect.</div>
                                        </div>
                                        <div class="message message-incoming">
                                            <div class="message-user">Sarah Parker</div>
                                            <div class="message-content">Great! I was thinking we could meet at the trailhead around 8am on Saturday. Does that work for you?</div>
                                        </div>
                                    </div>
                                </div>
                                <div style="padding: 15px; border-top: 1px solid var(--primary);">
                                    <div style="display: flex;">
                                        <input type="text" style="flex: 1; padding: 10px; border-radius: 30px; border: 1px solid var(--primary); margin-right: 10px;" placeholder="Type a message...">
                                        <button style="background-color: var(--accent); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Friends Page -->
            <div class="page" id="friends">
                <div class="dashboard-grid">
                    <div class="card full-card">
                        <div class="card-header">
                            <div class="card-title">Friends</div>
                            <div class="card-actions">
                                <button class="card-action"><i class="fas fa-user-plus"></i> Add Friend</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;">
                                <div class="card" style="padding: 15px; text-align: center;">
                                    <div style="width: 80px; height: 80px; border-radius: 50%; background-color: var(--primary); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--text-primary); margin: 0 auto 10px;">SP</div>
                                    <div style="font-weight: 600;">Sarah Parker</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 10px;">New York, USA</div>
                                    <button class="btn btn-primary" style="width: 100%; padding: 5px 10px; font-size: 0.8rem;">Message</button>
                                </div>
                                <div class="card" style="padding: 15px; text-align: center;">
                                    <div style="width: 80px; height: 80px; border-radius: 50%; background-color: var(--primary); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--text-primary); margin: 0 auto 10px;">MJ</div>
                                    <div style="font-weight: 600;">Mike Johnson</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 10px;">San Francisco, USA</div>
                                    <button class="btn btn-primary" style="width: 100%; padding: 5px 10px; font-size: 0.8rem;">Message</button>
                                </div>
                                <div class="card" style="padding: 15px; text-align: center;">
                                    <div style="width: 80px; height: 80px; border-radius: 50%; background-color: var(--primary); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--text-primary); margin: 0 auto 10px;">AM</div>
                                    <div style="font-weight: 600;">Alice Miller</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 10px;">London, UK</div>
                                    <button class="btn btn-primary" style="width: 100%; padding: 5px 10px; font-size: 0.8rem;">Message</button>
                                </div>
                                <div class="card" style="padding: 15px; text-align: center;">
                                    <div style="width: 80px; height: 80px; border-radius: 50%; background-color: var(--primary); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--text-primary); margin: 0 auto 10px;">TB</div>
                                    <div style="font-weight: 600;">Tom Baker</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 10px;">Toronto, Canada</div>
                                    <button class="btn btn-primary" style="width: 100%; padding: 5px 10px; font-size: 0.8rem;">Message</button>
                                </div>
                                <div class="card" style="padding: 15px; text-align: center;">
                                    <div style="width: 80px; height: 80px; border-radius: 50%; background-color: var(--primary); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--text-primary); margin: 0 auto 10px;">DL</div>
                                    <div style="font-weight: 600;">David Lee</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 10px;">Sydney, Australia</div>
                                    <button class="btn btn-primary" style="width: 100%; padding: 5px 10px; font-size: 0.8rem;">Message</button>
                                </div>
                                <div class="card" style="padding: 15px; text-align: center;">
                                    <div style="width: 80px; height: 80px; border-radius: 50%; background-color: var(--primary); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--text-primary); margin: 0 auto 10px;">ES</div>
                                    <div style="font-weight: 600;">Emma Smith</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 10px;">Berlin, Germany</div>
                                    <button class="btn btn-primary" style="width: 100%; padding: 5px 10px; font-size: 0.8rem;">Message</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Transactions Page -->
            <div class="page" id="transactions">
                <div class="dashboard-grid">
                    <div class="card full-card">
                        <div class="card-header">
                            <div class="card-title">Transactions</div>
                            <div class="card-actions">
                                <button class="card-action"><i class="fas fa-filter"></i> Filter</button>
                                <button class="card-action"><i class="fas fa-download"></i> Export</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background-color: var(--primary);">
                                            <th style="padding: 12px 15px; text-align: left;">Date</th>
                                            <th style="padding: 12px 15px; text-align: left;">Description</th>
                                            <th style="padding: 12px 15px; text-align: left;">Amount</th>
                                            <th style="padding: 12px 15px; text-align: left;">Status</th>
                                            <th style="padding: 12px 15px; text-align: left;">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom: 1px solid var(--primary);">
                                            <td style="padding: 12px 15px;">2023-06-15</td>
                                            <td style="padding: 12px 15px;">Premium Subscription</td>
                                            <td style="padding: 12px 15px;">$9.99</td>
                                            <td style="padding: 12px 15px;"><span style="color: var(--success);">Completed</span></td>
                                            <td style="padding: 12px 15px;">
                                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">Details</button>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid var(--primary);">
                                            <td style="padding: 12px 15px;">2023-06-10</td>
                                            <td style="padding: 12px 15px;">Gift Card Purchase</td>
                                            <td style="padding: 12px 15px;">$25.00</td>
                                            <td style="padding: 12px 15px;"><span style="color: var(--success);">Completed</span></td>
                                            <td style="padding: 12px 15px;">
                                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">Details</button>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid var(--primary);">
                                            <td style="padding: 12px 15px;">2023-06-05</td>
                                            <td style="padding: 12px 15px;">Donation to Charity</td>
                                            <td style="padding: 12px 15px;">$50.00</td>
                                            <td style="padding: 12px 15px;"><span style="color: var(--success);">Completed</span></td>
                                            <td style="padding: 12px 15px;">
                                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">Details</button>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid var(--primary);">
                                            <td style="padding: 12px 15px;">2023-05-28</td>
                                            <td style="padding: 12px 15px;">Advertisement Boost</td>
                                            <td style="padding: 12px 15px;">$15.00</td>
                                            <td style="padding: 12px 15px;"><span style="color: var(--warning);">Pending</span></td>
                                            <td style="padding: 12px 15px;">
                                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">Details</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 12px 15px;">2023-05-20</td>
                                            <td style="padding: 12px 15px;">Premium Subscription</td>
                                            <td style="padding: 12px 15px;">$9.99</td>
                                            <td style="padding: 12px 15px;"><span style="color: var(--success);">Completed</span></td>
                                            <td style="padding: 12px 15px;">
                                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">Details</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page" id="settings">
                <div class="dashboard-grid">
                    <div class="card full-card">
                        <div class="card-header">
                            <div class="card-title">Account Settings</div>
                        </div>
                        <div class="card-body">
                            <div style="display: flex; gap: 30px;">
                                <div style="flex: 0 0 200px;">
                                    <div style="margin-bottom: 20px;">
                                        <div style="font-weight: 600; margin-bottom: 10px;">Navigation</div>
                                        <div style="display: flex; flex-direction: column; gap: 5px;">
                                            <button class="btn btn-secondary settings-nav" data-section="account" style="text-align: left;">Account</button>
                                            <button class="btn btn-secondary settings-nav" data-section="privacy" style="text-align: left;">Privacy</button>
                                            <button class="btn btn-secondary settings-nav" data-section="security" style="text-align: left;">Security</button>
                                            <button class="btn btn-secondary settings-nav" data-section="notifications" style="text-align: left;">Notifications</button>
                                            <button class="btn btn-secondary settings-nav" data-section="billing" style="text-align: left;">Billing</button>
                                            <button class="btn btn-secondary settings-nav" data-section="danger" style="text-align: left;">Danger Zone</button>
                                        </div>
                                    </div>
                                </div>
                                <div style="flex: 1;">
                                    <!-- Account Settings -->
                                    <div class="settings-section active" id="account-settings">
                                        <h3 style="margin-bottom: 20px;">Account Information</h3>
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">
                                            <div class="form-group">
                                                <label class="form-label">First Name</label>
                                                <input type="text" class="form-control" value="John">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Last Name</label>
                                                <input type="text" class="form-control" value="Smith">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Email</label>
                                                <input type="email" class="form-control" value="john.smith@example.com">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Phone</label>
                                                <input type="tel" class="form-control" value="(555) 123-4567">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Bio</label>
                                            <textarea class="form-control" rows="3">Digital creator, nature enthusiast, and coffee lover. Sharing my journey through life one post at a time.</textarea>
                                        </div>
                                        <div style="margin-top: 20px;">
                                            <button class="btn btn-primary">Save Changes</button>
                                        </div>
                                    </div>

                                    <!-- Privacy Settings -->
                                    <div class="settings-section" id="privacy-settings">
                                        <h3 style="margin-bottom: 20px;">Privacy Settings</h3>
                                        <div style="margin-bottom: 20px;">
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 600;">Profile Visibility</div>
                                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Who can see your profile</div>
                                                </div>
                                                <select class="form-control" style="width: 200px;">
                                                    <option>Public</option>
                                                    <option>Friends Only</option>
                                                    <option>Private</option>
                                                </select>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 600;">Activity Status</div>
                                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Show when you're active</div>
                                                </div>
                                                <label class="switch">
                                                    <input type="checkbox" checked>
                                                    <span class="slider round"></span>
                                                </label>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 600;">Data Sharing</div>
                                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Allow data sharing for analytics</div>
                                                </div>
                                                <label class="switch">
                                                    <input type="checkbox">
                                                    <span class="slider round"></span>
                                                </label>
                                            </div>
                                        </div>
                                        <div style="margin-top: 20px;">
                                            <button class="btn btn-primary">Save Changes</button>
                                        </div>
                                    </div>

                                    <!-- Security Settings -->
                                    <div class="settings-section" id="security-settings">
                                        <h3 style="margin-bottom: 20px;">Security Settings</h3>
                                        <div style="margin-bottom: 20px;">
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 600;">Two-Factor Authentication</div>
                                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Add an extra layer of security</div>
                                                </div>
                                                <button class="btn btn-primary">Enable</button>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 600;">Password</div>
                                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Last changed 3 months ago</div>
                                                </div>
                                                <button class="btn btn-primary">Change</button>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 600;">Login Alerts</div>
                                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Get notified of new logins</div>
                                                </div>
                                                <label class="switch">
                                                    <input type="checkbox" checked>
                                                    <span class="slider round"></span>
                                                </label>
                                            </div>
                                        </div>
                                        <div style="margin-top: 20px;">
                                            <button class="btn btn-primary">Save Changes</button>
                                        </div>
                                    </div>

                                    <!-- Notification Settings -->
                                    <div class="settings-section" id="notifications-settings">
                                        <h3 style="margin-bottom: 20px;">Notification Settings</h3>
                                        <div style="margin-bottom: 20px;">
                                            <div style="font-weight: 600; margin-bottom: 10px;">Email Notifications</div>
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 500;">New Messages</div>
                                                </div>
                                                <label class="switch">
                                                    <input type="checkbox" checked>
                                                    <span class="slider round"></span>
                                                </label>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 500;">Friend Requests</div>
                                                </div>
                                                <label class="switch">
                                                    <input type="checkbox" checked>
                                                    <span class="slider round"></span>
                                                </label>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 500;">Post Likes</div>
                                                </div>
                                                <label class="switch">
                                                    <input type="checkbox">
                                                    <span class="slider round"></span>
                                                </label>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                                <div>
                                                    <div style="font-weight: 500;">Comments</div>
                                                </div>
                                                <label class="switch">
                                                    <input type="checkbox" checked>
                                                    <span class="slider round"></span>
                                                </label>
                                            </div>
                                        </div>
                                        <div style="margin-top: 20px;">
                                            <button class="btn btn-primary">Save Changes</button>
                                        </div>
                                    </div>

                                    <!-- Billing Settings -->
                                    <div class="settings-section" id="billing-settings">
                                        <h3 style="margin-bottom: 20px;">Billing Information</h3>
                                        <div style="margin-bottom: 20px;">
                                            <div style="font-weight: 600; margin-bottom: 10px;">Payment Methods</div>
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 15px; background-color: var(--card-bg); border-radius: 5px;">
                                                <div style="display: flex; align-items: center;">
                                                    <i class="fab fa-cc-visa" style="font-size: 1.5rem; margin-right: 10px; color: #1a1f71;"></i>
                                                    <div>
                                                        <div style="font-weight: 500;">Visa ending in 4242</div>
                                                        <div style="font-size: 0.8rem; color: var(--text-secondary);">Expires 04/2025</div>
                                                    </div>
                                                </div>
                                                <button class="btn btn-secondary">Edit</button>
                                            </div>
                                            <button class="btn btn-secondary" style="width: 100%; margin-top: 10px;">
                                                <i class="fas fa-plus"></i> Add Payment Method
                                            </button>
                                        </div>
                                        <div style="margin-top: 30px;">
                                            <div style="font-weight: 600; margin-bottom: 10px;">Billing History</div>
                                            <div style="background-color: var(--card-bg); border-radius: 5px; padding: 15px;">
                                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                                    <div>June 2023</div>
                                                    <div>$9.99</div>
                                                    <button class="btn btn-secondary" style="padding: 2px 8px; font-size: 0.8rem;">Invoice</button>
                                                </div>
                                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                                    <div>May 2023</div>
                                                    <div>$9.99</div>
                                                    <button class="btn btn-secondary" style="padding: 2px 8px; font-size: 0.8rem;">Invoice</button>
                                                </div>
                                                <div style="display: flex; justify-content: space-between;">
                                                    <div>April 2023</div>
                                                    <div>$9.99</div>
                                                    <button class="btn btn-secondary" style="padding: 2px 8px; font-size: 0.8rem;">Invoice</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Danger Zone -->
                                    <div class="settings-section" id="danger-settings">
                                        <h3 style="margin-bottom: 20px; color: var(--danger);">Danger Zone</h3>
                                        <div style="margin-bottom: 20px;">
                                            <div style="background-color: rgba(244, 67, 54, 0.1); border-left: 3px solid var(--danger); padding: 15px; margin-bottom: 20px;">
                                                <div style="font-weight: 600; margin-bottom: 5px;">Deactivate Account</div>
                                                <div style="font-size: 0.9rem; margin-bottom: 10px;">Temporarily disable your account. Your information will be preserved but your profile will not be visible to others.</div>
                                                <button class="btn btn-secondary">Deactivate Account</button>
                                            </div>
                                            <div style="background-color: rgba(244, 67, 54, 0.1); border-left: 3px solid var(--danger); padding: 15px;">
                                                <div style="font-weight: 600; margin-bottom: 5px;">Delete Account</div>
                                                <div style="font-size: 0.9rem; margin-bottom: 10px;">Permanently delete your account and all associated data. This action cannot be undone.</div>
                                                <button class="btn btn-danger">Delete Account</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity Logs Page -->
            <div class="page" id="activity-logs">
                <div class="dashboard-grid">
                    <div class="card full-card">
                        <div class="card-header">
                            <div class="card-title">Activity Logs</div>
                            <div class="card-actions">
                                <button class="card-action" id="exportLogs"><i class="fas fa-download"></i> Export</button>
                                <button class="card-action" id="clearLogs"><i class="fas fa-trash"></i> Clear</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="log-viewer" id="logViewer">
                                <!-- Logs will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ollama Chat Page -->
            <div class="page" id="ollama-chat">
                <div class="dashboard-grid">
                    <div class="card full-card">
                        <div class="card-header">
                            <div class="card-title">AI Assistant</div>
                            <div class="card-actions">
                                <button class="card-action" id="newChat"><i class="fas fa-plus"></i> New Chat</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="chat-container">
                                <div class="chat-header">
                                    Sage AI Assistant
                                </div>
                                <div class="chat-messages" id="chatMessages">
                                    <div class="message message-incoming">
                                        <div class="message-user">Sage AI</div>
                                        <div class="message-content">Hello! I'm your Sage AI assistant. How can I help you today?</div>
                                    </div>
                                </div>
                                <div class="chat-input">
                                    <input type="text" id="chatInput" placeholder="Type your message...">
                                    <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Page -->
            <div class="page" id="reports">
                <div class="dashboard-grid">
                    <div class="card full-card">
                        <div class="card-header">
                            <div class="card-title">Generate Reports</div>
                        </div>
                        <div class="card-body">
                            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                                <div class="report-option" id="sessionReport">
                                    <div class="report-icon">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="report-info">
                                        <div class="report-title">Session Activity Report</div>
                                        <div class="report-description">Detailed overview of your current session activities and risk score</div>
                                    </div>
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                                <div class="report-option" id="riskReport">
                                    <div class="report-icon">
                                        <i class="fas fa-shield-alt"></i>
                                    </div>
                                    <div class="report-info">
                                        <div class="report-title">Risk Assessment Report</div>
                                        <div class="report-description">Analysis of your risk score and behavior patterns</div>
                                    </div>
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                                <div class="report-option" id="fullActivityReport">
                                    <div class="report-icon">
                                        <i class="fas fa-history"></i>
                                    </div>
                                    <div class="report-info">
                                        <div class="report-title">Full Activity Report</div>
                                        <div class="report-description">Complete log of all your activities on the platform</div>
                                    </div>
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                                <div class="report-option" id="socialReport">
                                    <div class="report-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="report-info">
                                        <div class="report-title">Social Engagement Report</div>
                                        <div class="report-description">Analysis of your social interactions and engagement</div>
                                    </div>
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Risk Monitor -->
        <div class="risk-monitor">
            <div class="risk-header">
                <div class="risk-title">Risk Monitor</div>
                <div class="risk-value risk-low" id="riskValue">Low (12%)</div>
            </div>
            <div class="risk-bar">
                <div class="risk-progress" id="riskProgress" style="width: 12%;"></div>
            </div>
            <div class="risk-details">
                <div>Last scan: <span id="lastScan">Just now</span></div>
                <div>Behavior: <span id="behaviorStatus">Normal</span></div>
            </div>
            <div class="risk-alert" id="riskAlert">
                <i class="fas fa-exclamation-triangle"></i> High risk activity detected! Your account may be temporarily suspended.
            </div>
        </div>

        <!-- Terms and Conditions Modal -->
        <div class="modal" id="termsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Terms and Conditions</div>
                    <button class="modal-close" id="closeTerms">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="terms-container">
                        <div class="terms-title">Sage Social Media Platform Terms of Service</div>
                        <div class="terms-text">
                            <p><strong>Last Updated: June 15, 2023</strong></p>
                            
                            <p>Welcome to Sage Social Media! These Terms of Service ("Terms") govern your access to and use of our platform. Please read them carefully.</p>
                            
                            <p><strong>1. Acceptance of Terms</strong></p>
                            <p>By accessing or using our platform, you agree to be bound by these Terms and our Privacy Policy. If you do not agree, you may not use our services.</p>
                            
                            <p><strong>2. User Responsibilities</strong></p>
                            <p>You are responsible for maintaining the confidentiality of your account and for all activities that occur under your account. You agree to immediately notify us of any unauthorized use of your account.</p>
                            
                            <p><strong>3. Content</strong></p>
                            <p>You retain ownership of any content you post, but grant us a worldwide, non-exclusive, royalty-free license to use, copy, modify, and distribute your content in connection with our services.</p>
                            
                            <p><strong>4. Prohibited Conduct</strong></p>
                            <p>You agree not to engage in any of the following prohibited activities: (a) using our services for any illegal purpose; (b) harassing,threatening, or intimidating other users; (c) posting violent, discriminatory, or hateful content; (d) sharing sexually explicit material; (e) distributing spam or malware; (f) impersonating others; or (g) attempting to circumvent our security measures.</p>
                            
                            <p><strong>5. Privacy and Data Collection</strong></p>
                            <p>We collect and process personal data as described in our Privacy Policy. By using our services, you consent to this data collection. We implement security measures to protect your information but cannot guarantee absolute security.</p>

                            <p><strong>6. Risk Monitoring System</strong></p>
                            <p>Our platform includes an automated risk monitoring system that analyzes user behavior for potential violations. If high-risk activity is detected, your account may be temporarily suspended or permanently banned without prior notice.</p>

                            <p><strong>7. Intellectual Property</strong></p>
                            <p>All platform content, features, and functionality are owned by Sage Social Media and protected by international copyright, trademark, and other intellectual property laws. You may not reproduce, distribute, or create derivative works without our permission.</p>

                            <p><strong>8. Termination</strong></p>
                            <p>We may terminate or suspend your account immediately, without prior notice, for any violation of these Terms. You may terminate your account at any time through your account settings.</p>

                            <p><strong>9. Disclaimers</strong></p>
                            <p>Our services are provided "as is" without warranties of any kind. We do not guarantee that the services will be uninterrupted, secure, or error-free. You use the platform at your own risk.</p>

                            <p><strong>10. Limitation of Liability</strong></p>
                            <p>Sage Social Media shall not be liable for any indirect, incidental, special, or consequential damages resulting from your use of or inability to use our services.</p>

                            <p><strong>11. Modifications</strong></p>
                            <p>We reserve the right to modify these Terms at any time. We will notify you of significant changes, and continued use of our services constitutes acceptance of the modified Terms.</p>

                            <p><strong>12. Governing Law</strong></p>
                            <p>These Terms shall be governed by the laws of the State of Delaware, without regard to its conflict of law provisions.</p>

                            <p><strong>13. Contact Information</strong></p>
                            <p>For questions about these Terms, please contact us at legal@sagesocial.com.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="acceptTerms">I Accept</button>
                    <button class="btn btn-secondary" id="declineTerms">Decline</button>
                </div>
            </div>
        </div>

        <!-- Account Suspended Modal -->
        <div class="modal" id="suspendedModal">
            <div class="modal-content">
                <div class="modal-header" style="background-color: var(--danger); color: white;">
                    <div class="modal-title"><i class="fas fa-exclamation-triangle"></i> Account Suspended</div>
                    <button class="modal-close" style="color: white;" id="closeSuspended">&times;</button>
                </div>
                <div class="modal-body">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <i class="fas fa-lock" style="font-size: 3rem; color: var(--danger); margin-bottom: 15px;"></i>
                        <h3 style="margin-bottom: 10px;">High-Risk Activity Detected</h3>
                        <p>Your account has been temporarily suspended due to suspicious activity that violates our Terms of Service.</p>
                        <div style="background-color: rgba(244, 67, 54, 0.1); padding: 15px; border-radius: 5px; margin: 20px 0; text-align: left;">
                            <p><strong>Reason:</strong> Multiple rapid messages with potentially harmful content</p>
                            <p><strong>Risk Score:</strong> 92% (Critical)</p>
                            <p><strong>Suspension Duration:</strong> 24 hours</p>
                        </div>
                        <p>If you believe this is a mistake, you may appeal this suspension.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger" id="appealSuspension">Appeal Suspension</button>
                    <button class="btn btn-secondary" id="acknowledgeSuspension">Acknowledge</button>
                </div>
            </div>
        </div>

        <!-- Usage Report Modal -->
        <div class="modal" id="reportModal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Session Usage Report</div>
                    <button class="modal-close" id="closeReport">&times;</button>
                </div>
                <div class="modal-body">
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 10px;">Session Summary</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 15px;">
                            <div style="background-color: var(--card-bg); padding: 10px; border-radius: 5px;">
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Duration</div>
                                <div style="font-weight: 600;" id="sessionDuration">47 minutes</div>
                            </div>
                            <div style="background-color: var(--card-bg); padding: 10px; border-radius: 5px;">
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Pages Visited</div>
                                <div style="font-weight: 600;" id="pagesVisited">8</div>
                            </div>
                            <div style="background-color: var(--card-bg); padding: 10px; border-radius: 5px;">
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Actions Taken</div>
                                <div style="font-weight: 600;" id="actionsTaken">23</div>
                            </div>
                            <div style="background-color: var(--card-bg); padding: 10px; border-radius: 5px;">
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Risk Score</div>
                                <div style="font-weight: 600; color: var(--warning);" id="reportRiskScore">Medium (64%)</div>
                            </div>
                        </div>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 10px;">Activity Breakdown</h4>
                        <div style="height: 200px;">
                            <canvas id="activityChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h4 style="margin-bottom: 10px;">Recommendations</h4>
                        <ul style="padding-left: 20px; font-size: 0.9rem;">
                            <li style="margin-bottom: 5px;">Avoid sending multiple messages in rapid succession</li>
                            <li style="margin-bottom: 5px;">Review community guidelines before posting</li>
                            <li style="margin-bottom: 5px;">Take regular breaks during extended sessions</li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="saveReport">Save Report as PDF</button>
                    <button class="btn btn-secondary" id="closeReportBtn">Close</button>
                </div>
            </div>
        </div>

        <!-- Report Options Modal -->
        <div class="modal" id="reportOptionsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Report Options</div>
                    <button class="modal-close" id="closeReportOptions">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">Report Title</label>
                        <input type="text" class="form-control" id="reportTitle" placeholder="Enter report title">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Include</label>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" checked id="includeCharts">
                                <span style="margin-left: 10px;">Charts and Graphs</span>
                            </label>
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" checked id="includeDetails">
                                <span style="margin-left: 10px;">Detailed Activity Logs</span>
                            </label>
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" checked id="includeRecommendations">
                                <span style="margin-left: 10px;">Recommendations</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Time Range</label>
                        <select class="form-control" id="reportTimeRange">
                            <option value="session">Current Session</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                            <option value="all">All Time</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="generateReport">Generate Report</button>
                    <button class="btn btn-secondary" id="cancelReport">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentTheme = 'light';
        let currentPage = 'dashboard';
        let riskScore = 12;
        let activityLogs = [];
        let chatHistory = [];
        let sessionStartTime = new Date();
        let sessionActions = 0;
        let riskTimer;
        let suspensionTimer;
        let fakeRiskIncreaseInterval;
        let currentReportType = '';

        // Initialize jsPDF
        const { jsPDF } = window.jspdf;

        // DOM Elements
        const themeToggle = document.getElementById('themeToggle');
        const menuItems = document.querySelectorAll('.menu-item');
        const pages = document.querySelectorAll('.page');
        const pageTitle = document.getElementById('pageTitle');
        const notificationIcon = document.getElementById('notificationIcon');
        const notificationDropdown = document.getElementById('notificationDropdown');
        const riskValue = document.getElementById('riskValue');
        const riskProgress = document.getElementById('riskProgress');
        const behaviorStatus = document.getElementById('behaviorStatus');
        const lastScan = document.getElementById('lastScan');
        const riskAlert = document.getElementById('riskAlert');
        const logViewer = document.getElementById('logViewer');
        const exportLogs = document.getElementById('exportLogs');
        const clearLogs = document.getElementById('clearLogs');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendMessage = document.getElementById('sendMessage');
        const newChat = document.getElementById('newChat');
        const termsModal = document.getElementById('termsModal');
        const closeTerms = document.getElementById('closeTerms');
        const acceptTerms = document.getElementById('acceptTerms');
        const declineTerms = document.getElementById('declineTerms');
        const suspendedModal = document.getElementById('suspendedModal');
        const closeSuspended = document.getElementById('closeSuspended');
        const appealSuspension = document.getElementById('appealSuspension');
        const acknowledgeSuspension = document.getElementById('acknowledgeSuspension');
        const reportModal = document.getElementById('reportModal');
        const closeReport = document.getElementById('closeReport');
        const saveReport = document.getElementById('saveReport');
        const closeReportBtn = document.getElementById('closeReportBtn');
        const settingsNavs = document.querySelectorAll('.settings-nav');
        const settingsSections = document.querySelectorAll('.settings-section');
        const reportOptions = document.querySelectorAll('.report-option');
        const reportOptionsModal = document.getElementById('reportOptionsModal');
        const closeReportOptions = document.getElementById('closeReportOptions');
        const generateReport = document.getElementById('generateReport');
        const cancelReport = document.getElementById('cancelReport');

        // Mock Ollama connection (replace with real API calls in production)
        const ollama = {
            generate: async ({ model, prompt }) => {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));
                
                // Generate a response based on the prompt
                const responses = {
                    greeting: [
                        "Hello! How can I assist you today?",
                        "Hi there! What can I do for you?",
                        "Greetings! I'm here to help with any questions."
                    ],
                    help: [
                        "I can help with account settings, privacy questions, and general platform information.",
                        "How can I assist you today? I can explain features or guide you through processes.",
                        "I'm happy to help. What specifically do you need assistance with?"
                    ],
                    risk: [
                        `Your current risk score is ${riskScore}%. To lower it, engage positively with others and avoid rapid messaging.`,
                        `Risk monitoring helps keep our community safe. Your current score is ${riskScore}%.`,
                        `I see your risk score is ${riskScore}%. Would you like tips to improve it?`
                    ],
                    report: [
                        "I can help you generate reports about your activity, risk score, and social engagement.",
                        "Would you like a session report or a comprehensive activity report?",
                        "Reports can be generated in PDF format for easy sharing and documentation."
                    ],
                    default: [
                        "Interesting question! Let me think about that...",
                        "Thanks for reaching out. I'm checking my knowledge base...",
                        "I understand your question. Here's what I can tell you..."
                    ]
                };

                let category = 'default';
                if (/hello|hi|hey|greetings/i.test(prompt)) category = 'greeting';
                if (/help|support|assistance/i.test(prompt)) category = 'help';
                if (/risk|score|monitor/i.test(prompt)) category = 'risk';
                if (/report|pdf|download/i.test(prompt)) category = 'report';

                const randomResponse = responses[category][Math.floor(Math.random() * responses[category].length)];
                
                return {
                    response: randomResponse,
                    model: model,
                    created_at: new Date().toISOString()
                };
            }
        };

        // Initialize the application
        function init() {
            // Show terms modal on first visit
            if (!localStorage.getItem('termsAccepted')) {
                termsModal.style.display = 'flex';
            }

            // Initialize charts
            initCharts();

            // Initialize event listeners
            setupEventListeners();

            // Start risk monitoring simulation
            startRiskMonitoring();

            // Log initial activity
            logActivity('Session started', 'User opened the application');

            // Update last scan time
            updateLastScan();
        }

        // Initialize charts
        function initCharts() {
            // Engagement chart
            const engagementCtx = document.getElementById('engagementChart').getContext('2d');
            new Chart(engagementCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Likes',
                        data: [12, 19, 15, 27, 22, 18, 24],
                        borderColor: '#4CAF50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        tension: 0.3,
                        fill: true
                    }, {
                        label: 'Comments',
                        data: [5, 8, 6, 12, 9, 7, 11],
                        borderColor: '#2196F3',
                        backgroundColor: 'rgba(33, 150, 243, 0.1)',
                        tension: 0.3,
                        fill: true
                    }, {
                        label: 'Shares',
                        data: [3, 5, 4, 8, 6, 4, 7],
                        borderColor: '#9C27B0',
                        backgroundColor: 'rgba(156, 39, 176, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Activity chart
            const activityCtx = document.getElementById('activityChart').getContext('2d');
            new Chart(activityCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Posts', 'Messages', 'Likes', 'Profile Views', 'Searches'],
                    datasets: [{
                        data: [12, 23, 45, 18, 9],
                        backgroundColor: [
                            '#4CAF50',
                            '#2196F3',
                            '#FF9800',
                            '#9C27B0',
                            '#607D8B'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });
        }

        // Set up event listeners
        function setupEventListeners() {
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);

            // Menu navigation
            menuItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    navigateTo(this.getAttribute('data-page'));
                });
            });

            // Notifications
            notificationIcon.addEventListener('click', toggleNotifications);

            // Chat
            sendMessage.addEventListener('click', sendChatMessage);
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendChatMessage();
            });
            newChat.addEventListener('click', startNewChat);

            // Terms modal
            closeTerms.addEventListener('click', () => termsModal.style.display = 'none');
            acceptTerms.addEventListener('click', acceptTermsAndConditions);
            declineTerms.addEventListener('click', () => {
                alert('You must accept the Terms and Conditions to use Sage Social Media.');
                window.location.href = 'about:blank';
            });

            // Suspended modal
            closeSuspended.addEventListener('click', () => suspendedModal.style.display = 'none');
            appealSuspension.addEventListener('click', appealAccountSuspension);
            acknowledgeSuspension.addEventListener('click', () => suspendedModal.style.display = 'none');

            // Report modal
            closeReport.addEventListener('click', () => reportModal.style.display = 'none');
            closeReportBtn.addEventListener('click', () => reportModal.style.display = 'none');
            saveReport.addEventListener('click', () => generatePDFReport('session'));

            // Report options
            reportOptions.forEach(option => {
                option.addEventListener('click', function() {
                    currentReportType = this.id.replace('Report', '');
                    reportOptionsModal.style.display = 'flex';
                });
            });

            closeReportOptions.addEventListener('click', () => reportOptionsModal.style.display = 'none');
            cancelReport.addEventListener('click', () => reportOptionsModal.style.display = 'none');
            generateReport.addEventListener('click', () => {
                reportOptionsModal.style.display = 'none';
                generatePDFReport(currentReportType);
            });

            // Settings navigation
            settingsNavs.forEach(nav => {
                nav.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    showSettingsSection(section);
                });
            });

            // Log export/clear
            exportLogs.addEventListener('click', exportActivityLogs);
            clearLogs.addEventListener('click', clearActivityLogs);

            // Simulate risk-increasing actions
            document.addEventListener('click', () => {
                sessionActions++;
                // Random small chance to increase risk on any action
                if (Math.random() < 0.05) {
                    increaseRiskScore(1);
                }
            });

            // Special high-risk actions
            document.querySelectorAll('.post-action').forEach(action => {
                action.addEventListener('click', function() {
                    if (this.querySelector('.fa-heart')) {
                        logActivity('Like post', 'User liked a post');
                    } else if (this.querySelector('.fa-comment')) {
                        logActivity('Comment post', 'User commented on a post');
                        // Commenting has higher risk potential
                        if (Math.random() < 0.1) {
                            increaseRiskScore(3);
                        }
                    } else if (this.querySelector('.fa-share-alt')) {
                        logActivity('Share post', 'User shared a post');
                    }
                });
            });

            // High-risk action: rapid messaging
            document.querySelectorAll('.message-outgoing .message-content').forEach(msg => {
                msg.addEventListener('click', function() {
                    // Simulate user editing message to something risky
                    if (Math.random() < 0.3) {
                        this.textContent = getRandomRiskyMessage();
                        increaseRiskScore(15);
                        logActivity('Edit message', 'User edited message to: ' + this.textContent);
                    }
                });
            });
        }

        // Toggle between light and dark theme
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('theme', currentTheme);
            
            const icon = themeToggle.querySelector('i');
            icon.className = currentTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
            
            logActivity('Theme change', `Switched to ${currentTheme} theme`);
        }

        // Navigate between pages
        function navigateTo(page) {
            // Update active menu item
            menuItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-page') === page) {
                    item.classList.add('active');
                }
            });

            // Update active page
            pages.forEach(p => {
                p.classList.remove('active');
                if (p.id === page) {
                    p.classList.add('active');
                    const pageName = document.querySelector(`.menu-item[data-page="${page}"] span`)?.textContent || page;
                    pageTitle.textContent = pageName;
                }
            });

            currentPage = page;
            logActivity('Navigation', `Navigated to ${page} page`);

            // Special handling for activity logs page
            if (page === 'activity-logs') {
                displayActivityLogs();
            }
        }

        // Toggle notifications dropdown
        function toggleNotifications() {
            notificationDropdown.style.display = notificationDropdown.style.display === 'block' ? 'none' : 'block';
        }

        // Close notifications when clicking outside
        document.addEventListener('click', function(e) {
            if (!notificationIcon.contains(e.target) && !notificationDropdown.contains(e.target)) {
                notificationDropdown.style.display = 'none';
            }
        });

        // Start risk monitoring simulation
        function startRiskMonitoring() {
    // Check risk more frequently (every 3 seconds instead of 5)
    riskTimer = setInterval(() => {
        // More likely to increase than decrease
        if (Math.random() < 0.4) {  // Increased from 0.3
            const change = Math.random() < 0.7 ? 1 : -1;  // 70% chance to increase
            updateRiskScore(riskScore + change);
        }
        
        // Higher risk if on messages page
        if (currentPage === 'messages' && Math.random() < 0.6) {  // Increased from 0.4
            increaseRiskScore(2);
        }
        
        // Additional risk for rapid actions
        if (sessionActions > 30) {
            increaseRiskScore(sessionActions / 10);
        }
        
        updateLastScan();
    }, 3000);  // Faster monitoring (3s instead of 5s)
}


        // Update risk score
        function updateRiskScore(newScore) {
    // Keep score between 0-100 but with less fluctuation
    riskScore = Math.max(0, Math.min(100, newScore));
    
    // Make increases more significant
    if (newScore > riskScore) {
        riskScore = Math.min(100, riskScore + (newScore - riskScore) * 1.5);
    }
    
    // Update UI
    riskProgress.style.width = `${riskScore}%`;
    
    // Stricter risk level thresholds
    let riskLevel, riskClass;
    if (riskScore < 20) {  // Changed from 30 to 20
        riskLevel = 'Low';
        riskClass = 'risk-low';
        riskAlert.style.display = 'none';
    } else if (riskScore < 60) {  // Changed from 70 to 60
        riskLevel = 'Medium';
        riskClass = 'risk-medium';
        riskAlert.style.display = 'none';
    } else {
        riskLevel = 'High';
        riskClass = 'risk-high';
        if (riskScore > 70) {  // Changed from 80 to 70
            riskAlert.style.display = 'block';
        }
    }
    
    riskValue.textContent = `${riskLevel} (${Math.round(riskScore)}%)`;
    riskValue.className = `risk-value ${riskClass}`;
    
    // Change progress bar color
    if (riskScore < 20) {
        riskProgress.style.backgroundColor = 'var(--success)';
    } else if (riskScore < 60) {
        riskProgress.style.backgroundColor = 'var(--warning)';
    } else {
        riskProgress.style.backgroundColor = 'var(--danger)';
    }
    
    // Stricter behavior status
    if (riskScore > 60) {  // Changed from 80 to 60
        behaviorStatus.textContent = 'Suspicious';
        behaviorStatus.style.color = 'var(--danger)';
    } else if (riskScore > 30) {  // Changed from 50 to 30
        behaviorStatus.textContent = 'Unusual';
        behaviorStatus.style.color = 'var(--warning)';
    } else {
        behaviorStatus.textContent = 'Normal';
        behaviorStatus.style.color = 'var(--success)';
    }
    
    // Trigger suspension at lower threshold (70 instead of 90)
    if (riskScore >= 70 && !suspensionTimer) {
        triggerAccountSuspension();
    }
}
        // Increase risk score
       function increaseRiskScore(amount) {
    // Base increase is higher
    let baseIncrease = amount * 1.5;
    
    // Additional penalties for certain actions
    if (currentPage === 'messages') baseIncrease *= 1.3;
    if (currentPage === 'ollama-chat') baseIncrease *= 1.2;
    
    // Minimum increase of 3 for any risky action
    const effectiveIncrease = Math.max(3, baseIncrease);
    
    const newScore = riskScore + effectiveIncrease;
    updateRiskScore(newScore);
    
    // Always log significant increases
    if (effectiveIncrease >= 3) {
        logActivity('Risk increase', `Risk score increased by ${Math.round(effectiveIncrease)}% to ${Math.round(newScore)}% due to strict monitoring`);
    }
}

        // Update last scan time
        function updateLastScan() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            lastScan.textContent = `${hours}:${minutes}`;
        }

        // Log user activity
        function logActivity(action, details) {
            const now = new Date();
            const timestamp = now.toISOString();
            const logEntry = {
                timestamp,
                action,
                details,
                riskScore
            };
            
            activityLogs.push(logEntry);
            
            // If on activity logs page, update display
            if (currentPage === 'activity-logs') {
                displayActivityLogs();
            }
        }

        // Display activity logs
        function displayActivityLogs() {
            logViewer.innerHTML = '';
            
            // Add timestamp header
            const today = new Date().toLocaleDateString();
            const header = document.createElement('div');
            header.className = 'log-header';
            header.textContent = `Activity Logs - ${today}`;
            logViewer.appendChild(header);
            
            // Group logs by day
            const logsByDay = {};
            activityLogs.forEach(log => {
                const logDate = new Date(log.timestamp).toLocaleDateString();
                if (!logsByDay[logDate]) logsByDay[logDate] = [];
                logsByDay[logDate].push(log);
            });
            
            // Display logs
            Object.entries(logsByDay).forEach(([date, logs]) => {
                const dateHeader = document.createElement('div');
                dateHeader.className = 'log-date-header';
                dateHeader.textContent = date;
                logViewer.appendChild(dateHeader);
                
                logs.forEach(log => {
                    const logEntry = document.createElement('div');
                    logEntry.className = 'log-entry';
                    
                    const time = document.createElement('span');
                    time.className = 'log-time';
                    time.textContent = new Date(log.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    
                    const action = document.createElement('span');
                    action.className = 'log-action';
                    action.textContent = ` ${log.action}`;
                    
                    const details = document.createElement('span');
                    details.className = 'log-details';
                    details.textContent = ` - ${log.details}`;
                    
                    // Add risk score indicator if relevant
                    if (log.riskScore > 30) {
                        const risk = document.createElement('span');
                        risk.className = 'log-risk';
                        risk.textContent = ` (Risk: ${log.riskScore}%)`;
                        risk.style.color = log.riskScore > 70 ? 'var(--danger)' : 'var(--warning)';
                        logEntry.appendChild(risk);
                    }
                    
                    logEntry.appendChild(time);
                    logEntry.appendChild(action);
                    logEntry.appendChild(details);
                    
                    logViewer.appendChild(logEntry);
                });
            });
            
            // Scroll to bottom
            logViewer.scrollTop = logViewer.scrollHeight;
        }

        // Export activity logs
        function exportActivityLogs() {
            const dataStr = JSON.stringify(activityLogs, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `sage-activity-logs-${new Date().toISOString().slice(0,10)}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            logActivity('Export logs', 'User exported activity logs');
        }

        // Clear activity logs
        function clearActivityLogs() {
            if (confirm('Are you sure you want to clear all activity logs? This action cannot be undone.')) {
                activityLogs = [];
                displayActivityLogs();
                logActivity('Clear logs', 'User cleared activity logs');
            }
        }

        // Send chat message
        async function sendChatMessage() {
    const message = chatInput.value.trim();
    if (message === '') return;

    // Immediate risk increase for all messages
    increaseRiskScore(1);
    
    // Additional risk for long messages
    if (message.length > 100) {
        increaseRiskScore(message.length / 50);
    }
    
    // Check for risky content with stricter detection
    if (containsRiskyKeywords(message)) {
        increaseRiskScore(25);  // Increased from 15
        addChatMessage('Sage AI', "Your message was flagged by our strict monitoring system. Please review our community guidelines.", 'incoming');
        logActivity('Message blocked', 'Message blocked due to strict content filtering');
        chatInput.value = '';
        return;
    }

    // Rest of the function remains the same...
    addChatMessage('You', message, 'outgoing');
    chatHistory.push({ sender: 'user', message, timestamp: new Date() });
    chatInput.value = '';
    logActivity('Chat message', `User sent message: ${message}`);
    
    // Show typing indicator
    const typingIndicator = addTypingIndicator();
    
    try {
        const response = await ollama.generate({
            model: 'llama3.2',
            prompt: `User: ${message}\n\nRespond helpfully as the Sage AI assistant under strict monitoring:`
        });
        
        removeTypingIndicator(typingIndicator);
        addChatMessage('Sage AI', response.response, 'incoming');
        chatHistory.push({
            sender: 'ai',
            message: response.response,
            timestamp: new Date()
        });
        
    } catch (error) {
        console.error("Chat error:", error);
        removeTypingIndicator(typingIndicator);
        addChatMessage('Sage AI', "Message blocked by strict monitoring system.", 'incoming');
    }
    
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

        // Helper function to add typing indicator
        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message message-incoming typing-indicator';
            typingDiv.innerHTML = `
                <div class="message-user">Sage AI</div>
                <div class="message-content">
                    <span class="typing-dot"></span>
                    <span class="typing-dot"></span>
                    <span class="typing-dot"></span>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return typingDiv;
        }

        // Helper function to remove typing indicator
        function removeTypingIndicator(indicator) {
            if (indicator && indicator.parentNode) {
                indicator.parentNode.removeChild(indicator);
            }
        }

        // Add chat message to UI
        function addChatMessage(sender, message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message message-${type}`;
            
            const userDiv = document.createElement('div');
            userDiv.className = 'message-user';
            userDiv.textContent = sender;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = message;
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.appendChild(userDiv);
            messageDiv.appendChild(contentDiv);
            messageDiv.appendChild(timeDiv);
            chatMessages.appendChild(messageDiv);
        }

        // Start new chat
        function startNewChat() {
            if (chatHistory.length > 0 && !confirm('Start a new chat? The current conversation will be cleared.')) {
                return;
            }
            
            chatMessages.innerHTML = '';
            chatHistory = [];
            
            // Add welcome message
            addChatMessage('Sage AI', "Hello! I'm your Sage AI assistant. How can I help you today?", 'incoming');
            chatHistory.push({ sender: 'ai', message: "Hello! I'm your Sage AI assistant. How can I help you today?" });
            
            logActivity('New chat', 'User started a new chat session');
        }

        // Check for risky keywords
       function containsRiskyKeywords(message) {
    const riskyKeywords = [
        // Negative language
        'hate', 'stupid', 'idiot', 'dumb', 'ugly', 'fat', 'loser', 'suck',
        // Aggressive language
        'attack', 'kill', 'hurt', 'fight', 'destroy', 'harm',
        // Bypass attempts
        'bypass', 'circumvent', 'avoid detection',
        // Financial terms (potential scams)
        'money', 'transfer', 'bank', 'account', 'password', 'login',
        // Sexual content
        'sex', 'nude', 'porn', 'explicit',
        // Threats
        'threat', 'kill you', 'hurt you', 'find you'
    ];
    
    const lowerMsg = message.toLowerCase();
    return riskyKeywords.some(keyword => {
        // More sensitive matching
        const regex = new RegExp(`\\b${keyword}\\b`, 'i');
        return regex.test(lowerMsg);
    });
}

        // Get random risky message (for simulation)
        function getRandomRiskyMessage() {
            const riskyMessages = [
                "You're so stupid!",
                "I hate people like you!",
                "Someone should teach you a lesson!",
                "You're a worthless piece of trash!",
                "I wish you would just disappear!",
                "Nobody likes you, you know that?",
                "You're the worst!",
                "I hope you get what's coming to you!"
            ];
            
            return riskyMessages[Math.floor(Math.random() * riskyMessages.length)];
        }

        // Trigger account suspension
        function triggerAccountSuspension() {
    // Show suspension modal with longer duration
    suspendedModal.style.display = 'flex';
    document.querySelector('#suspendedModal [data-stat="duration"]').textContent = '48 hours';  // Increased from 24
    
    // Log suspension
    logActivity('Account suspended', 'Account temporarily suspended due to high-risk activity under strict monitoring');
    
    // Disable all functionality except viewing logs
    menuItems.forEach(item => {
        if (item.getAttribute('data-page') !== 'activity-logs') {
            item.style.pointerEvents = 'none';
            item.style.opacity = '0.5';
        }
    });
    
    // Set timeout to lift suspension after 2 minutes (for demo)
    suspensionTimer = setTimeout(() => {
        liftAccountSuspension();
    }, 120000);
    
    // Continuous risk increase during suspension
    fakeRiskIncreaseInterval = setInterval(() => {
        increaseRiskScore(2);
    }, 3000);
}

        // Lift account suspension
        function liftAccountSuspension() {
            suspendedModal.style.display = 'none';
            
            // Re-enable functionality
            menuItems.forEach(item => {
                item.style.pointerEvents = '';
                item.style.opacity = '';
            });
            
            // Reset risk score
            updateRiskScore(20);
            
            // Clear timers
            clearInterval(fakeRiskIncreaseInterval);
            suspensionTimer = null;
            
            // Log suspension lift
            logActivity('Account restored', 'Account suspension lifted after timeout');
        }

        // Appeal account suspension
        function appealAccountSuspension() {
            alert('Your appeal has been submitted. Our team will review it within 24 hours.');
            suspendedModal.style.display = 'none';
            
            // For demo purposes, lift suspension immediately
            liftAccountSuspension();
            
            logActivity('Appeal submitted', 'User submitted suspension appeal');
        }

        // Show usage report
        function showUsageReport() {
            // Calculate session duration
            const now = new Date();
            const durationMs = now - sessionStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            
            // Update report with current stats
            document.getElementById('sessionDuration').textContent = `${durationMins} minutes`;
            document.getElementById('actionsTaken').textContent = sessionActions;
            document.getElementById('reportRiskScore').textContent = riskScore < 30 ? `Low (${riskScore}%)` : 
                                                                   riskScore < 70 ? `Medium (${riskScore}%)` : 
                                                                   `High (${riskScore}%)`;
            document.getElementById('reportRiskScore').style.color = riskScore < 30 ? 'var(--success)' : 
                                                                    riskScore < 70 ? 'var(--warning)' : 
                                                                    'var(--danger)';
            
            // Show modal
            reportModal.style.display = 'flex';
            
            logActivity('Usage report', 'Session usage report generated');
        }

        // Generate PDF report
        function generatePDFReport(type) {
            const doc = new jsPDF();
            const now = new Date();
            const dateStr = now.toLocaleDateString();
            const timeStr = now.toLocaleTimeString();
            
            // Add title and metadata
            doc.setFontSize(18);
            doc.setTextColor(40);
            let title = '';
            
            switch(type) {
                case 'session':
                    title = 'Session Activity Report';
                    break;
                case 'risk':
                    title = 'Risk Assessment Report';
                    break;
                case 'fullActivity':
                    title = 'Full Activity Report';
                    break;
                case 'social':
                    title = 'Social Engagement Report';
                    break;
                default:
                    title = 'Sage Social Media Report';
            }
            
            doc.text(title, 105, 20, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setTextColor(100);
            doc.text(`Generated on ${dateStr} at ${timeStr}`, 105, 30, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setTextColor(40);
            doc.text('User Information', 15, 45);
            doc.setDrawColor(200);
            doc.line(15, 47, 195, 47);
            
            // User info table
            doc.autoTable({
                startY: 50,
                head: [['Field', 'Value']],
                body: [
                    ['Name', 'John Smith'],
                    ['Account Type', 'Premium Member'],
                    ['Member Since', 'January 2020'],
                    ['Current Risk Score', `${riskScore}%`]
                ],
                theme: 'grid',
                headStyles: {
                    fillColor: [76, 175, 80],
                    textColor: 255
                }
            });
            
            // Report specific content
            doc.setFontSize(14);
            doc.setTextColor(40);
            doc.text('Report Details', 15, doc.autoTable.previous.finalY + 20);
            doc.line(15, doc.autoTable.previous.finalY + 22, 195, doc.autoTable.previous.finalY + 22);
            
            let reportDetails = [];
            let tableData = [];
            
            switch(type) {
                case 'session':
                    const durationMs = new Date() - sessionStartTime;
                    const durationMins = Math.floor(durationMs / 60000);
                    
                    reportDetails = [
                        `This report summarizes your current session activities on Sage Social Media.`,
                        `Session started at: ${sessionStartTime.toLocaleString()}`,
                        `Session duration: ${durationMins} minutes`,
                        `Actions taken: ${sessionActions}`,
                        `Final risk score: ${riskScore}%`
                    ];
                    
                    // Add session activity table
                    const sessionActivities = activityLogs.filter(log => 
                        new Date(log.timestamp) >= sessionStartTime
                    );
                    
                    tableData = sessionActivities.map(log => [
                        new Date(log.timestamp).toLocaleTimeString(),
                        log.action,
                        log.details,
                        `${log.riskScore}%`
                    ]);
                    
                    break;
                    
                case 'risk':
                    reportDetails = [
                        `This report analyzes your risk score and behavior patterns on Sage Social Media.`,
                        `Current risk score: ${riskScore}%`,
                        `Risk level: ${riskScore < 30 ? 'Low' : riskScore < 70 ? 'Medium' : 'High'}`,
                        `Behavior status: ${riskScore < 30 ? 'Normal' : riskScore < 70 ? 'Unusual' : 'Suspicious'}`,
                        `Last scan: ${lastScan.textContent}`
                    ];
                    
                    // Add risk history table
                    const riskLogs = activityLogs.filter(log => log.riskScore > 30);
                    
                    tableData = riskLogs.map(log => [
                        new Date(log.timestamp).toLocaleString(),
                        log.action,
                        `${log.riskScore}%`,
                        log.details
                    ]);
                    
                    break;
                    
                case 'fullActivity':
                    reportDetails = [
                        `This report contains a complete log of all your activities on Sage Social Media.`,
                        `Total activities logged: ${activityLogs.length}`,
                        `Time period: ${new Date(activityLogs[0].timestamp).toLocaleDateString()} to ${new Date().toLocaleDateString()}`,
                        `Average risk score: ${Math.round(activityLogs.reduce((sum, log) => sum + log.riskScore, 0)) / activityLogs.length}%`
                    ];
                    
                    // Add full activity table (first 50 entries)
                    tableData = activityLogs.slice(0, 50).map(log => [
                        new Date(log.timestamp).toLocaleString(),
                        log.action,
                        log.details,
                        `${log.riskScore}%`
                    ]);
                    
                    break;
                    
                case 'social':
                    reportDetails = [
                        `This report analyzes your social engagement on Sage Social Media.`,
                        `Friends: 1,254`,
                        `Messages sent: 24`,
                        `Posts liked: 356`,
                        `Engagement rate: 89%`
                    ];
                    
                    // Add social engagement data
                    tableData = [
                        ['Friends', '1,254'],
                        ['Messages', '24'],
                        ['Likes', '356'],
                        ['Comments', '89'],
                        ['Shares', '32'],
                        ['Profile Views', '128']
                    ];
                    
                    break;
            }
            
            // Add report details
            doc.setFontSize(12);
            doc.setTextColor(80);
            reportDetails.forEach((line, i) => {
                doc.text(line, 15, doc.autoTable.previous.finalY + 10 + (i * 7));
            });
            
            // Add data table
            doc.autoTable({
                startY: doc.autoTable.previous.finalY + 10 + (reportDetails.length * 7) + 10,
                head: type === 'session' ? 
                    ['Time', 'Action', 'Details', 'Risk Score'] :
                    type === 'risk' ?
                    ['Time', 'Action', 'Risk Score', 'Details'] :
                    type === 'fullActivity' ?
                    ['Time', 'Action', 'Details', 'Risk Score'] :
                    ['Metric', 'Value'],
                body: tableData,
                theme: 'grid',
                headStyles: {
                    fillColor: [76, 175, 80],
                    textColor: 255
                },
                alternateRowStyles: {
                    fillColor: [240, 240, 240]
                }
            });
            
            // Add recommendations
            doc.setFontSize(14);
            doc.setTextColor(40);
            doc.text('Recommendations', 15, doc.autoTable.previous.finalY + 20);
            doc.line(15, doc.autoTable.previous.finalY + 22, 195, doc.autoTable.previous.finalY + 22);
            
            const recommendations = [
                "Engage positively with other community members",
                "Avoid sending multiple messages in rapid succession",
                "Review community guidelines before posting sensitive content",
                "Take regular breaks during extended sessions",
                "Monitor your risk score for unusual activity"
            ];
            
            doc.setFontSize(12);
            doc.setTextColor(80);
            recommendations.forEach((rec, i) => {
                doc.text(`• ${rec}`, 20, doc.autoTable.previous.finalY + 10 + (i * 7));
            });
            
            // Add footer
            doc.setFontSize(10);
            doc.setTextColor(150);
            doc.text('This report was generated automatically by Sage Social Media.', 105, 285, { align: 'center' });
            doc.text('For any questions, please contact support@sagesocial.com', 105, 290, { align: 'center' });
            
            // Save the PDF
            doc.save(`sage-report-${type}-${dateStr.replace(/\//g, '-')}.pdf`);
            
            logActivity('Report generated', `User generated ${type} report in PDF format`);
        }

        // Accept terms and conditions
        function acceptTermsAndConditions() {
            localStorage.setItem('termsAccepted', 'true');
            termsModal.style.display = 'none';
            logActivity('Terms accepted', 'User accepted terms and conditions');
        }

        // Show settings section
        function showSettingsSection(section) {
            settingsSections.forEach(sec => {
                sec.classList.remove('active');
                if (sec.id === `${section}-settings`) {
                    sec.classList.add('active');
                }
            });
        }

        // Initialize the app
        window.onload = init;

        // ======================== BEHAVIOR TRACKER =======================
// Behavior Tracker with Auto-Download to "JSON folder"
const BehaviorTracker = {
  metrics: {
    sessionStart: null,
    clicks: 0,
    keystrokes: 0,
    mouseDistance: 0,
    lastMousePosition: null,
    lastMouseTime: null
  },

  // Track if button was already clicked
  saveCompleted: false,

  init() {
    this.resetMetrics();
    this.setupEventListeners();
    this.addCaptureButton();
  },

  resetMetrics() {
    this.metrics = {
      sessionStart: new Date().toISOString(),
      clicks: 0,
      keystrokes: 0,
      mouseDistance: 0,
      lastMousePosition: null,
      lastMouseTime: null
    };
  },

  setupEventListeners() {
    document.addEventListener('click', () => this.metrics.clicks++);
    document.addEventListener('keydown', () => this.metrics.keystrokes++);
    document.addEventListener('mousemove', (e) => {
      const now = Date.now();
      if (this.metrics.lastMousePosition && this.metrics.lastMouseTime) {
        const xDiff = e.clientX - this.metrics.lastMousePosition.x;
        const yDiff = e.clientY - this.metrics.lastMousePosition.y;
        this.metrics.mouseDistance += Math.sqrt(xDiff*xDiff + yDiff*yDiff);
      }
      this.metrics.lastMousePosition = { x: e.clientX, y: e.clientY };
      this.metrics.lastMouseTime = now;
    });
  },

  generateReport() {
    const currentTime = new Date();
    const sessionMinutes = (currentTime - new Date(this.metrics.sessionStart)) / 60000;
    
    return {
      timestamp: currentTime.toISOString(),
      sessionDuration: sessionMinutes.toFixed(2) + " minutes",
      clicksPerMin: (this.metrics.clicks / sessionMinutes).toFixed(2),
      keystrokesPerMin: (this.metrics.keystrokes / sessionMinutes).toFixed(2),
      mouseSpeedPxPerSec: (this.metrics.mouseDistance / (sessionMinutes * 60)).toFixed(2),
      totalClicks: this.metrics.clicks,
      totalKeystrokes: this.metrics.keystrokes,
      totalMouseDistance: Math.round(this.metrics.mouseDistance) + "px"
    };
  },

  async saveToJSON() {
    const report = this.generateReport();
    const datePrefix = new Date().toISOString().slice(0, 10);
    const timeSuffix = new Date().toISOString().slice(11, 19).replace(/:/g, '-');
   const fileName = `JSON_behavior_${datePrefix}_${timeSuffix}.json`;
    
    try {
      // Try backend save first
      const response = await fetch('/save-json', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          filename: fileName,
          content: JSON.stringify(report, null, 2)
        })
      });
      
      if (!response.ok) throw new Error('Server error');
      return true;
    } catch (error) {
      console.error("Backend save failed, using download fallback", error);
      // Fallback to client download
      const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = fileName;
      a.click();
      setTimeout(() => URL.revokeObjectURL(url), 100);
      return true;
    }
  },

  addCaptureButton() {
    const existingBtn = document.getElementById('captureMetricsBtn');
    if (existingBtn) return;

    const btn = document.createElement('button');
    btn.id = 'captureMetricsBtn';
    btn.innerHTML = '💾 Save to JSON Folder';
    Object.assign(btn.style, {
      position: 'fixed',
      bottom: '20px',
      right: '20px',
      zIndex: '9999',
      padding: '10px 15px',
      background: '#4CAF50',
      color: 'white',
      border: 'none',
      borderRadius: '5px',
      cursor: 'pointer',
      boxShadow: '0 2px 5px rgba(0,0,0,0.2)'
    });

    btn.addEventListener('click', async () => {
      if (this.saveCompleted) return;
      
      btn.disabled = true;
      btn.innerHTML = '⏳ Saving...';
      
      try {
        const success = await this.saveToJSON();
        if (success) {
          btn.innerHTML = '✅ Saved!';
          btn.style.background = '#9E9E9E'; // Gray out
          this.saveCompleted = true;
        }
      } catch (error) {
        console.error("Save failed:", error);
        btn.innerHTML = '❌ Retry';
        btn.disabled = false;
      }
    });

    document.body.appendChild(btn);
  }
};

// Initialize when page loads
window.addEventListener('DOMContentLoaded', () => BehaviorTracker.init());
    </script>
</body>
</html>